<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaWeb ä¹‹ Cookie å’Œ Session | JAVA-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/java-tutorial/img/favicon.ico">
    <script src="https://cdn.wwads.cn/js/makemoney.js" type="text/javascript"></script>
    <meta name="description" content="â˜• java-tutorial æ˜¯ä¸€ä¸ª Java æ•™ç¨‹ï¼Œæ±‡é›†ä¸€ä¸ªè€å¸æœºåœ¨ Java é¢†åŸŸçš„åå¹´ç§¯ç´¯ã€‚">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    <meta name="wwads-cn-verify" content="mxqWx62nfQQ9ocT4e5DzISHzOWyF4s">
    
    <link rel="preload" href="/java-tutorial/assets/css/0.styles.22aad9ca.css" as="style"><link rel="preload" href="/java-tutorial/assets/js/app.daf69751.js" as="script"><link rel="preload" href="/java-tutorial/assets/js/2.bc9223e0.js" as="script"><link rel="preload" href="/java-tutorial/assets/js/8.e2e9dd66.js" as="script"><link rel="prefetch" href="/java-tutorial/assets/js/10.9edf914b.js"><link rel="prefetch" href="/java-tutorial/assets/js/100.ccc9a903.js"><link rel="prefetch" href="/java-tutorial/assets/js/101.183df0d3.js"><link rel="prefetch" href="/java-tutorial/assets/js/102.72154a73.js"><link rel="prefetch" href="/java-tutorial/assets/js/103.e83801db.js"><link rel="prefetch" href="/java-tutorial/assets/js/104.37a7b1ee.js"><link rel="prefetch" href="/java-tutorial/assets/js/105.2f58df41.js"><link rel="prefetch" href="/java-tutorial/assets/js/106.a9afdc16.js"><link rel="prefetch" href="/java-tutorial/assets/js/107.a78ef136.js"><link rel="prefetch" href="/java-tutorial/assets/js/108.2b5c1e35.js"><link rel="prefetch" href="/java-tutorial/assets/js/109.3e36e9e8.js"><link rel="prefetch" href="/java-tutorial/assets/js/11.f9f5b03a.js"><link rel="prefetch" href="/java-tutorial/assets/js/110.38a5c579.js"><link rel="prefetch" href="/java-tutorial/assets/js/111.b42b4984.js"><link rel="prefetch" href="/java-tutorial/assets/js/112.a6fdaf7c.js"><link rel="prefetch" href="/java-tutorial/assets/js/113.977f8481.js"><link rel="prefetch" href="/java-tutorial/assets/js/114.c37d8374.js"><link rel="prefetch" href="/java-tutorial/assets/js/115.adbb31d7.js"><link rel="prefetch" href="/java-tutorial/assets/js/116.e53d9383.js"><link rel="prefetch" href="/java-tutorial/assets/js/117.bc43cd18.js"><link rel="prefetch" href="/java-tutorial/assets/js/118.80cf3c9b.js"><link rel="prefetch" href="/java-tutorial/assets/js/119.17d1d3ef.js"><link rel="prefetch" href="/java-tutorial/assets/js/12.5c15bdc6.js"><link rel="prefetch" href="/java-tutorial/assets/js/120.fb2ee254.js"><link rel="prefetch" href="/java-tutorial/assets/js/121.f36932f6.js"><link rel="prefetch" href="/java-tutorial/assets/js/122.cf1fe750.js"><link rel="prefetch" href="/java-tutorial/assets/js/123.7dd5179b.js"><link rel="prefetch" href="/java-tutorial/assets/js/124.b11f012a.js"><link rel="prefetch" href="/java-tutorial/assets/js/125.10278b2b.js"><link rel="prefetch" href="/java-tutorial/assets/js/126.ab14f44c.js"><link rel="prefetch" href="/java-tutorial/assets/js/127.5ba17976.js"><link rel="prefetch" href="/java-tutorial/assets/js/128.af3c1a70.js"><link rel="prefetch" href="/java-tutorial/assets/js/129.ace640fd.js"><link rel="prefetch" href="/java-tutorial/assets/js/13.581f93fb.js"><link rel="prefetch" href="/java-tutorial/assets/js/130.f9a86620.js"><link rel="prefetch" href="/java-tutorial/assets/js/131.45c339b9.js"><link rel="prefetch" href="/java-tutorial/assets/js/132.4c2730f0.js"><link rel="prefetch" href="/java-tutorial/assets/js/133.c65beba5.js"><link rel="prefetch" href="/java-tutorial/assets/js/134.41643697.js"><link rel="prefetch" href="/java-tutorial/assets/js/135.4c938701.js"><link rel="prefetch" href="/java-tutorial/assets/js/136.f32614a8.js"><link rel="prefetch" href="/java-tutorial/assets/js/137.79410813.js"><link rel="prefetch" href="/java-tutorial/assets/js/14.67210f72.js"><link rel="prefetch" href="/java-tutorial/assets/js/15.f02a1ad1.js"><link rel="prefetch" href="/java-tutorial/assets/js/16.e64fab55.js"><link rel="prefetch" href="/java-tutorial/assets/js/17.e6ca686c.js"><link rel="prefetch" href="/java-tutorial/assets/js/18.8f0b0ab4.js"><link rel="prefetch" href="/java-tutorial/assets/js/19.091524f7.js"><link rel="prefetch" href="/java-tutorial/assets/js/20.b2650a4f.js"><link rel="prefetch" href="/java-tutorial/assets/js/21.1df4f842.js"><link rel="prefetch" href="/java-tutorial/assets/js/22.bbf93466.js"><link rel="prefetch" href="/java-tutorial/assets/js/23.e5a6c9e1.js"><link rel="prefetch" href="/java-tutorial/assets/js/24.7a6a1ab1.js"><link rel="prefetch" href="/java-tutorial/assets/js/25.05ce92da.js"><link rel="prefetch" href="/java-tutorial/assets/js/26.cc0a008a.js"><link rel="prefetch" href="/java-tutorial/assets/js/27.19032685.js"><link rel="prefetch" href="/java-tutorial/assets/js/28.b2bb31ab.js"><link rel="prefetch" href="/java-tutorial/assets/js/29.e89cf580.js"><link rel="prefetch" href="/java-tutorial/assets/js/3.1f5cc974.js"><link rel="prefetch" href="/java-tutorial/assets/js/30.e72522ac.js"><link rel="prefetch" href="/java-tutorial/assets/js/31.23bc8c03.js"><link rel="prefetch" href="/java-tutorial/assets/js/32.b536a066.js"><link rel="prefetch" href="/java-tutorial/assets/js/33.ebee4849.js"><link rel="prefetch" href="/java-tutorial/assets/js/34.c85865c5.js"><link rel="prefetch" href="/java-tutorial/assets/js/35.ebc1fb00.js"><link rel="prefetch" href="/java-tutorial/assets/js/36.68e02904.js"><link rel="prefetch" href="/java-tutorial/assets/js/37.674930ad.js"><link rel="prefetch" href="/java-tutorial/assets/js/38.8d6a8a9f.js"><link rel="prefetch" href="/java-tutorial/assets/js/39.797eb403.js"><link rel="prefetch" href="/java-tutorial/assets/js/4.d163695c.js"><link rel="prefetch" href="/java-tutorial/assets/js/40.d28b7496.js"><link rel="prefetch" href="/java-tutorial/assets/js/41.ce6ca6c6.js"><link rel="prefetch" href="/java-tutorial/assets/js/42.273291d5.js"><link rel="prefetch" href="/java-tutorial/assets/js/43.5e461285.js"><link rel="prefetch" href="/java-tutorial/assets/js/44.971cad76.js"><link rel="prefetch" href="/java-tutorial/assets/js/45.8e0c71aa.js"><link rel="prefetch" href="/java-tutorial/assets/js/46.f5577b26.js"><link rel="prefetch" href="/java-tutorial/assets/js/47.f71cc3c9.js"><link rel="prefetch" href="/java-tutorial/assets/js/48.a8578d32.js"><link rel="prefetch" href="/java-tutorial/assets/js/49.0e290971.js"><link rel="prefetch" href="/java-tutorial/assets/js/5.cf5cb583.js"><link rel="prefetch" href="/java-tutorial/assets/js/50.b5439840.js"><link rel="prefetch" href="/java-tutorial/assets/js/51.3afc4e67.js"><link rel="prefetch" href="/java-tutorial/assets/js/52.52ce1139.js"><link rel="prefetch" href="/java-tutorial/assets/js/53.e1cc5362.js"><link rel="prefetch" href="/java-tutorial/assets/js/54.fd9608e5.js"><link rel="prefetch" href="/java-tutorial/assets/js/55.632b6016.js"><link rel="prefetch" href="/java-tutorial/assets/js/56.e9aa4eea.js"><link rel="prefetch" href="/java-tutorial/assets/js/57.c0d1542e.js"><link rel="prefetch" href="/java-tutorial/assets/js/58.bc0f7c1c.js"><link rel="prefetch" href="/java-tutorial/assets/js/59.36b207a0.js"><link rel="prefetch" href="/java-tutorial/assets/js/6.d144eb92.js"><link rel="prefetch" href="/java-tutorial/assets/js/60.89446b88.js"><link rel="prefetch" href="/java-tutorial/assets/js/61.f110e04e.js"><link rel="prefetch" href="/java-tutorial/assets/js/62.62d349c4.js"><link rel="prefetch" href="/java-tutorial/assets/js/63.834fb95c.js"><link rel="prefetch" href="/java-tutorial/assets/js/64.e0fa19b4.js"><link rel="prefetch" href="/java-tutorial/assets/js/65.ff3773a7.js"><link rel="prefetch" href="/java-tutorial/assets/js/66.45b99ef4.js"><link rel="prefetch" href="/java-tutorial/assets/js/67.8ad9ddbe.js"><link rel="prefetch" href="/java-tutorial/assets/js/68.a0b09a76.js"><link rel="prefetch" href="/java-tutorial/assets/js/69.bc43b589.js"><link rel="prefetch" href="/java-tutorial/assets/js/7.f2dc074f.js"><link rel="prefetch" href="/java-tutorial/assets/js/70.38a10912.js"><link rel="prefetch" href="/java-tutorial/assets/js/71.fe10a220.js"><link rel="prefetch" href="/java-tutorial/assets/js/72.0c0ade29.js"><link rel="prefetch" href="/java-tutorial/assets/js/73.fbe5d03a.js"><link rel="prefetch" href="/java-tutorial/assets/js/74.f058f74c.js"><link rel="prefetch" href="/java-tutorial/assets/js/75.de33a550.js"><link rel="prefetch" href="/java-tutorial/assets/js/76.e3fbc3d6.js"><link rel="prefetch" href="/java-tutorial/assets/js/77.15bc7ae4.js"><link rel="prefetch" href="/java-tutorial/assets/js/78.c9176f76.js"><link rel="prefetch" href="/java-tutorial/assets/js/79.a8e94c89.js"><link rel="prefetch" href="/java-tutorial/assets/js/80.88799756.js"><link rel="prefetch" href="/java-tutorial/assets/js/81.02a75d13.js"><link rel="prefetch" href="/java-tutorial/assets/js/82.26bfc230.js"><link rel="prefetch" href="/java-tutorial/assets/js/83.ef23783d.js"><link rel="prefetch" href="/java-tutorial/assets/js/84.7768ab87.js"><link rel="prefetch" href="/java-tutorial/assets/js/85.166bc923.js"><link rel="prefetch" href="/java-tutorial/assets/js/86.a0082b69.js"><link rel="prefetch" href="/java-tutorial/assets/js/87.f1a7edaf.js"><link rel="prefetch" href="/java-tutorial/assets/js/88.280451ae.js"><link rel="prefetch" href="/java-tutorial/assets/js/89.c22d4323.js"><link rel="prefetch" href="/java-tutorial/assets/js/9.9ce755cc.js"><link rel="prefetch" href="/java-tutorial/assets/js/90.c3ef04cb.js"><link rel="prefetch" href="/java-tutorial/assets/js/91.af01336c.js"><link rel="prefetch" href="/java-tutorial/assets/js/92.6459c6be.js"><link rel="prefetch" href="/java-tutorial/assets/js/93.366fa5d5.js"><link rel="prefetch" href="/java-tutorial/assets/js/94.29bb3af2.js"><link rel="prefetch" href="/java-tutorial/assets/js/95.c8acb7ef.js"><link rel="prefetch" href="/java-tutorial/assets/js/96.02c8387a.js"><link rel="prefetch" href="/java-tutorial/assets/js/97.f3fe9a9b.js"><link rel="prefetch" href="/java-tutorial/assets/js/98.0158ff39.js"><link rel="prefetch" href="/java-tutorial/assets/js/99.d9478ffd.js">
    <link rel="stylesheet" href="/java-tutorial/assets/css/0.styles.22aad9ca.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/java-tutorial/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/master/common/dunwu-logo.png" alt="JAVA-TUTORIAL" class="logo"> <span class="site-name can-hide">JAVA-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/java-tutorial/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/java-tutorial/01.Java/02.JavaEE/" class="nav-link">JavaEE</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javaè½¯ä»¶" class="dropdown-title"><a href="/java-tutorial/01.Java/11.è½¯ä»¶/" class="link-title">Javaè½¯ä»¶</a> <span class="title" style="display:none;">Javaè½¯ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/11.è½¯ä»¶/01.æ„å»º/" class="nav-link">Java æ„å»º</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/11.è½¯ä»¶/02.IDE/" class="nav-link">Java IDE</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/11.è½¯ä»¶/03.ç›‘æ§è¯Šæ–­/" class="nav-link">Java ç›‘æ§è¯Šæ–­</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javaå·¥å…·" class="dropdown-title"><a href="/java-tutorial/01.Java/12.å·¥å…·/" class="link-title">Javaå·¥å…·</a> <span class="title" style="display:none;">Javaå·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/12.å·¥å…·/01.IO/" class="nav-link">Java IO å·¥å…·</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/12.å·¥å…·/02.JavaBean/" class="nav-link">JavaBean å·¥å…·</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/12.å·¥å…·/03.æ¨¡æ¿å¼•æ“/" class="nav-link">Java æ¨¡æ¿å¼•æ“</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/12.å·¥å…·/04.æµ‹è¯•/" class="nav-link">Java æµ‹è¯•å·¥å…·</a></li></ul></div></div><div class="nav-item"><a href="/java-tutorial/01.Java/13.æ¡†æ¶/" class="nav-link">Javaæ¡†æ¶</a></div><div class="nav-item"><a href="/java-tutorial/01.Java/14.ä¸­é—´ä»¶/" class="nav-link">Javaä¸­é—´ä»¶</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/dunwu/java-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/java-tutorial/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/java-tutorial/01.Java/02.JavaEE/" class="nav-link">JavaEE</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javaè½¯ä»¶" class="dropdown-title"><a href="/java-tutorial/01.Java/11.è½¯ä»¶/" class="link-title">Javaè½¯ä»¶</a> <span class="title" style="display:none;">Javaè½¯ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/11.è½¯ä»¶/01.æ„å»º/" class="nav-link">Java æ„å»º</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/11.è½¯ä»¶/02.IDE/" class="nav-link">Java IDE</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/11.è½¯ä»¶/03.ç›‘æ§è¯Šæ–­/" class="nav-link">Java ç›‘æ§è¯Šæ–­</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javaå·¥å…·" class="dropdown-title"><a href="/java-tutorial/01.Java/12.å·¥å…·/" class="link-title">Javaå·¥å…·</a> <span class="title" style="display:none;">Javaå·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/12.å·¥å…·/01.IO/" class="nav-link">Java IO å·¥å…·</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/12.å·¥å…·/02.JavaBean/" class="nav-link">JavaBean å·¥å…·</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/12.å·¥å…·/03.æ¨¡æ¿å¼•æ“/" class="nav-link">Java æ¨¡æ¿å¼•æ“</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/01.Java/12.å·¥å…·/04.æµ‹è¯•/" class="nav-link">Java æµ‹è¯•å·¥å…·</a></li></ul></div></div><div class="nav-item"><a href="/java-tutorial/01.Java/13.æ¡†æ¶/" class="nav-link">Javaæ¡†æ¶</a></div><div class="nav-item"><a href="/java-tutorial/01.Java/14.ä¸­é—´ä»¶/" class="nav-link">Javaä¸­é—´ä»¶</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/dunwu/java-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaEE</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>JavaWeb</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/e98894/" class="sidebar-link">JavaWeb ä¹‹ Servlet æŒ‡å—</a></li><li><a href="/java-tutorial/pages/8cc787/" class="sidebar-link">JavaWeb ä¹‹ Jsp æŒ‡å—</a></li><li><a href="/java-tutorial/pages/82df5f/" class="sidebar-link">JavaWeb ä¹‹ Filter å’Œ Listener</a></li><li><a href="/java-tutorial/pages/c46bff/" aria-current="page" class="active sidebar-link">JavaWeb ä¹‹ Cookie å’Œ Session</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c46bff/#cookie" class="sidebar-link">Cookie</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#cookie-æ˜¯ä»€ä¹ˆ" class="sidebar-link">Cookie æ˜¯ä»€ä¹ˆ</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#cookie-å‰–æ" class="sidebar-link">Cookie å‰–æ</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#cookie-ç±»ä¸­çš„æ–¹æ³•" class="sidebar-link">Cookie ç±»ä¸­çš„æ–¹æ³•</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#cookie-çš„æœ‰æ•ˆæœŸ" class="sidebar-link">Cookie çš„æœ‰æ•ˆæœŸ</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#cookie-çš„åŸŸå" class="sidebar-link">Cookie çš„åŸŸå</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#cookie-çš„è·¯å¾„" class="sidebar-link">Cookie çš„è·¯å¾„</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#cookie-çš„å®‰å…¨å±æ€§" class="sidebar-link">Cookie çš„å®‰å…¨å±æ€§</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#cookie-å®ä¾‹" class="sidebar-link">Cookie å®ä¾‹</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c46bff/#æ·»åŠ -cookie" class="sidebar-link">æ·»åŠ  Cookie</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c46bff/#æ˜¾ç¤º-cookie" class="sidebar-link">æ˜¾ç¤º Cookie</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c46bff/#åˆ é™¤-cookie" class="sidebar-link">åˆ é™¤ Cookie</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c46bff/#session" class="sidebar-link">Session</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#session-æ˜¯ä»€ä¹ˆ" class="sidebar-link">Session æ˜¯ä»€ä¹ˆ</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#session-ç±»ä¸­çš„æ–¹æ³•" class="sidebar-link">Session ç±»ä¸­çš„æ–¹æ³•</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#session-çš„æœ‰æ•ˆæœŸ" class="sidebar-link">Session çš„æœ‰æ•ˆæœŸ</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#session-å¯¹æµè§ˆå™¨çš„è¦æ±‚" class="sidebar-link">Session å¯¹æµè§ˆå™¨çš„è¦æ±‚</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#url-åœ°å€é‡å†™" class="sidebar-link">URL åœ°å€é‡å†™</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#session-ä¸­ç¦ç”¨-cookie" class="sidebar-link">Session ä¸­ç¦ç”¨ Cookie</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#session-å®ä¾‹" class="sidebar-link">Session å®ä¾‹</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c46bff/#session-è·Ÿè¸ª" class="sidebar-link">Session è·Ÿè¸ª</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c46bff/#åˆ é™¤-session-ä¼šè¯æ•°æ®" class="sidebar-link">åˆ é™¤ Session ä¼šè¯æ•°æ®</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c46bff/#cookie-vs-session" class="sidebar-link">Cookie vs Session</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#å­˜å–æ–¹å¼" class="sidebar-link">å­˜å–æ–¹å¼</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#éšç§å®‰å…¨" class="sidebar-link">éšç§å®‰å…¨</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#æœ‰æ•ˆæœŸ" class="sidebar-link">æœ‰æ•ˆæœŸ</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#æœåŠ¡å™¨çš„å¼€é”€" class="sidebar-link">æœåŠ¡å™¨çš„å¼€é”€</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#æµè§ˆå™¨çš„æ”¯æŒ" class="sidebar-link">æµè§ˆå™¨çš„æ”¯æŒ</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c46bff/#è·¨åŸŸå" class="sidebar-link">è·¨åŸŸå</a></li></ul></li></ul></li><li><a href="/java-tutorial/pages/e175ce/" class="sidebar-link">JavaWeb é¢ç»</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>æœåŠ¡å™¨</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è½¯ä»¶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å·¥å…·</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ¡†æ¶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ä¸­é—´ä»¶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/java-tutorial/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/java-tutorial/categories/?category=Java" title="åˆ†ç±»" data-v-06225672>Java</a></li><li data-v-06225672><a href="/java-tutorial/categories/?category=JavaEE" title="åˆ†ç±»" data-v-06225672>JavaEE</a></li><li data-v-06225672><a href="/java-tutorial/categories/?category=JavaWeb" title="åˆ†ç±»" data-v-06225672>JavaWeb</a></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/dunwu" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>dunwu</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2020-08-24</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">JavaWeb ä¹‹ Cookie å’Œ Session<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="javaweb-ä¹‹-cookie-å’Œ-session"><a href="#javaweb-ä¹‹-cookie-å’Œ-session" class="header-anchor">#</a> JavaWeb ä¹‹ Cookie å’Œ Session</h1> <h2 id="cookie"><a href="#cookie" class="header-anchor">#</a> Cookie</h2> <p>ç”±äº Http æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼ŒæœåŠ¡å™¨å•ä»ç½‘ç»œè¿æ¥ä¸Šæ— ä»çŸ¥é“å®¢æˆ·èº«ä»½ã€‚</p> <p>ä¼šè¯è·Ÿè¸ªæ˜¯ Web ç¨‹åºä¸­å¸¸ç”¨çš„æŠ€æœ¯ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„æ•´ä¸ªä¼šè¯ã€‚å¸¸ç”¨ä¼šè¯è·Ÿè¸ªæŠ€æœ¯æ˜¯ Cookie ä¸ Sessionã€‚</p> <h3 id="cookie-æ˜¯ä»€ä¹ˆ"><a href="#cookie-æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> Cookie æ˜¯ä»€ä¹ˆ</h3> <p>Cookie å®é™…ä¸Šæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ä¸Šçš„æ–‡æœ¬ä¿¡æ¯ï¼Œå¹¶ä¿ç•™äº†å„ç§è·Ÿè¸ªçš„ä¿¡æ¯ã€‚</p> <p><strong>Cookie å·¥ä½œæ­¥éª¤ï¼š</strong></p> <ol><li>å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ï¼Œå¦‚æœæœåŠ¡å™¨éœ€è¦è®°å½•è¯¥ç”¨æˆ·çš„çŠ¶æ€ï¼Œå°±æ˜¯ç”¨ response å‘å®¢æˆ·ç«¯æµè§ˆå™¨é¢å‘ä¸€ä¸ª Cookieã€‚</li> <li>å®¢æˆ·ç«¯æµè§ˆå™¨ä¼šæŠŠ Cookie ä¿å­˜ä¸‹æ¥ã€‚</li> <li>å½“æµè§ˆå™¨å†è¯·æ±‚è¯¥ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨æŠŠè¯¥è¯·æ±‚çš„ç½‘å€è¿åŒ Cookie ä¸€åŒæäº¤ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨æ£€æŸ¥è¯¥ Cookieï¼Œä»¥æ­¤æ¥è¾¨è®¤ç”¨æˆ·çŠ¶æ€ã€‚</li></ol> <p><strong><em>æ³¨ï¼šCookie åŠŸèƒ½éœ€è¦æµè§ˆå™¨çš„æ”¯æŒï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ Cookie æˆ–è€… Cookie ç¦ç”¨äº†ï¼ŒCookie åŠŸèƒ½å°±ä¼šå¤±æ•ˆã€‚</em></strong></p> <p>Java ä¸­æŠŠ Cookie å°è£…æˆäº†<code>javax.servlet.http.Cookie</code>ç±»ã€‚</p> <h3 id="cookie-å‰–æ"><a href="#cookie-å‰–æ" class="header-anchor">#</a> Cookie å‰–æ</h3> <p>Cookies é€šå¸¸è®¾ç½®åœ¨ HTTP å¤´ä¿¡æ¯ä¸­ï¼ˆè™½ç„¶ JavaScript ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸Šè®¾ç½®ä¸€ä¸ª Cookieï¼‰ã€‚</p> <p>è®¾ç½® Cookie çš„ Servlet ä¼šå‘é€å¦‚ä¸‹çš„å¤´ä¿¡æ¯ï¼š</p> <div class="language-http extra-class"><pre class="language-http"><code><span class="token response-status"><span class="token http-version property">HTTP/1.1</span> <span class="token status-code number">200</span> <span class="token reason-phrase string">OK</span></span>
<span class="token header"><span class="token header-name keyword">Date</span><span class="token punctuation">:</span> <span class="token header-value">Fri, 04 Feb 2000 21:03:38 GMT</span></span>
<span class="token header"><span class="token header-name keyword">Server</span><span class="token punctuation">:</span> <span class="token header-value">Apache/1.3.9 (UNIX) PHP/4.0b3</span></span>
<span class="token header"><span class="token header-name keyword">Set-Cookie</span><span class="token punctuation">:</span> <span class="token header-value">name=xyz; expires=Friday, 04-Feb-07 22:03:38 GMT;
                 path=/; domain=w3cschool.cc</span></span>
<span class="token header"><span class="token header-name keyword">Connection</span><span class="token punctuation">:</span> <span class="token header-value">close</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">text/html</span></span>
</code></pre></div><p>æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œ<code>Set-Cookie</code> å¤´åŒ…å«äº†ä¸€ä¸ªåç§°å€¼å¯¹ã€ä¸€ä¸ª GMT æ—¥æœŸã€ä¸€ä¸ªè·¯å¾„å’Œä¸€ä¸ªåŸŸã€‚åç§°å’Œå€¼ä¼šè¢« URL ç¼–ç ã€‚expires å­—æ®µæ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨ç»™å®šçš„æ—¶é—´å’Œæ—¥æœŸä¹‹å&quot;å¿˜è®°&quot;è¯¥ Cookieã€‚</p> <p>å¦‚æœæµè§ˆå™¨è¢«é…ç½®ä¸ºå­˜å‚¨ Cookiesï¼Œå®ƒå°†ä¼šä¿ç•™æ­¤ä¿¡æ¯ç›´åˆ°åˆ°æœŸæ—¥æœŸã€‚å¦‚æœç”¨æˆ·çš„æµè§ˆå™¨æŒ‡å‘ä»»ä½•åŒ¹é…è¯¥ Cookie çš„è·¯å¾„å’ŒåŸŸçš„é¡µé¢ï¼Œå®ƒä¼šé‡æ–°å‘é€ Cookie åˆ°æœåŠ¡å™¨ã€‚æµè§ˆå™¨çš„å¤´ä¿¡æ¯å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-http extra-class"><pre class="language-http"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url">/</span> <span class="token http-version property">HTTP/1.0</span></span>
<span class="token header"><span class="token header-name keyword">Connection</span><span class="token punctuation">:</span> <span class="token header-value">Keep-Alive</span></span>
<span class="token header"><span class="token header-name keyword">User-Agent</span><span class="token punctuation">:</span> <span class="token header-value">Mozilla/4.6 (X11; I; Linux 2.2.6-15apmac ppc)</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">zink.demon.co.uk:1126</span></span>
<span class="token header"><span class="token header-name keyword">Accept</span><span class="token punctuation">:</span> <span class="token header-value">image/gif, */*</span></span>
<span class="token header"><span class="token header-name keyword">Accept-Encoding</span><span class="token punctuation">:</span> <span class="token header-value">gzip</span></span>
<span class="token header"><span class="token header-name keyword">Accept-Language</span><span class="token punctuation">:</span> <span class="token header-value">en</span></span>
<span class="token header"><span class="token header-name keyword">Accept-Charset</span><span class="token punctuation">:</span> <span class="token header-value">iso-8859-1,*,utf-8</span></span>
<span class="token header"><span class="token header-name keyword">Cookie</span><span class="token punctuation">:</span> <span class="token header-value">name=xyz</span></span>
</code></pre></div><h3 id="cookie-ç±»ä¸­çš„æ–¹æ³•"><a href="#cookie-ç±»ä¸­çš„æ–¹æ³•" class="header-anchor">#</a> Cookie ç±»ä¸­çš„æ–¹æ³•</h3> <table><thead><tr><th>æ–¹æ³•</th> <th>åŠŸèƒ½</th></tr></thead> <tbody><tr><td>public void setDomain(String pattern)</td> <td>è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„åŸŸã€‚</td></tr> <tr><td>public String getDomain()</td> <td>è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„åŸŸã€‚</td></tr> <tr><td>public void setMaxAge(int expiry)</td> <td>è¯¥æ–¹æ³•è®¾ç½® cookie è¿‡æœŸçš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚å¦‚æœä¸è¿™æ ·è®¾ç½®ï¼Œcookie åªä¼šåœ¨å½“å‰ session ä¼šè¯ä¸­æŒç»­æœ‰æ•ˆã€‚</td></tr> <tr><td>public int getMaxAge()</td> <td>è¯¥æ–¹æ³•è¿”å› cookie çš„æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ-1 è¡¨ç¤º cookie å°†æŒç»­ä¸‹å»ï¼Œç›´åˆ°æµè§ˆå™¨å…³é—­ã€‚</td></tr> <tr><td>public String getName()</td> <td>è¯¥æ–¹æ³•è¿”å› cookie çš„åç§°ã€‚åç§°åœ¨åˆ›å»ºåä¸èƒ½æ”¹å˜ã€‚</td></tr> <tr><td>public void setValue(String newValue)</td> <td>è¯¥æ–¹æ³•è®¾ç½®ä¸ cookie å…³è”çš„å€¼ã€‚</td></tr> <tr><td>public String getValue()</td> <td>è¯¥æ–¹æ³•è·å–ä¸ cookie å…³è”çš„å€¼ã€‚</td></tr> <tr><td>public void setPath(String uri)</td> <td>è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„è·¯å¾„ã€‚å¦‚æœæ‚¨ä¸æŒ‡å®šè·¯å¾„ï¼Œä¸å½“å‰é¡µé¢ç›¸åŒç›®å½•ä¸‹çš„ï¼ˆåŒ…æ‹¬å­ç›®å½•ä¸‹çš„ï¼‰æ‰€æœ‰ URL éƒ½ä¼šè¿”å› cookieã€‚</td></tr> <tr><td>public String getPath()</td> <td>è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„è·¯å¾„ã€‚</td></tr> <tr><td>public void setSecure(boolean flag)</td> <td>è¯¥æ–¹æ³•è®¾ç½®å¸ƒå°”å€¼ï¼Œå‘æµè§ˆå™¨æŒ‡ç¤ºï¼Œåªä¼šåœ¨ HTTPS å’Œ SSL ç­‰å®‰å…¨åè®®ä¸­ä¼ è¾“æ­¤ç±» Cookieã€‚</td></tr> <tr><td>public void setComment(String purpose)</td> <td>è¯¥æ–¹æ³•è§„å®šäº†æè¿° cookie ç›®çš„çš„æ³¨é‡Šã€‚è¯¥æ³¨é‡Šåœ¨æµè§ˆå™¨å‘ç”¨æˆ·å‘ˆç° cookie æ—¶éå¸¸æœ‰ç”¨ã€‚</td></tr> <tr><td>public String getComment()</td> <td>è¯¥æ–¹æ³•è¿”å›äº†æè¿° cookie ç›®çš„çš„æ³¨é‡Šï¼Œå¦‚æœ cookie æ²¡æœ‰æ³¨é‡Šåˆ™è¿”å› nullã€‚</td></tr></tbody></table> <h3 id="cookie-çš„æœ‰æ•ˆæœŸ"><a href="#cookie-çš„æœ‰æ•ˆæœŸ" class="header-anchor">#</a> Cookie çš„æœ‰æ•ˆæœŸ</h3> <p><code>Cookie</code>çš„<code>maxAge</code>å†³å®šç€ Cookie çš„æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’ã€‚</p> <p>å¦‚æœ maxAge ä¸º 0ï¼Œåˆ™è¡¨ç¤ºåˆ é™¤è¯¥ Cookieï¼›</p> <p>å¦‚æœä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºè¯¥ Cookie ä»…åœ¨æœ¬æµè§ˆå™¨ä¸­ä»¥åŠæœ¬çª—å£æ‰“å¼€çš„å­çª—å£å†…æœ‰æ•ˆï¼Œå…³é—­çª—å£åè¯¥ Cookie å³å¤±æ•ˆã€‚</p> <p>Cookie ä¸­æä¾›<code>getMaxAge()</code><strong>å’Œ</strong><code>setMaxAge(int expiry)</code>æ–¹æ³•æ¥è¯»å†™<code>maxAge</code>å±æ€§ã€‚</p> <h3 id="cookie-çš„åŸŸå"><a href="#cookie-çš„åŸŸå" class="header-anchor">#</a> Cookie çš„åŸŸå</h3> <p>Cookie æ˜¯ä¸å¯ä»¥è·¨åŸŸåçš„ã€‚åŸŸå www.google.com é¢å‘çš„ Cookie ä¸ä¼šè¢«æäº¤åˆ°åŸŸå www.baidu.com å»ã€‚è¿™æ˜¯ç”± Cookie çš„éšç§å®‰å…¨æœºåˆ¶å†³å®šçš„ã€‚éšç§å®‰å…¨æœºåˆ¶èƒ½å¤Ÿç¦æ­¢ç½‘ç«™éæ³•è·å–å…¶ä»–ç½‘ç«™çš„ Cookieã€‚</p> <p>æ­£å¸¸æƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªä¸€çº§åŸŸåçš„ä¸¤ä¸ªäºŒçº§åŸŸåä¹‹é—´ä¹Ÿä¸èƒ½äº’ç›¸ä½¿ç”¨ Cookieã€‚å¦‚æœæƒ³è®©æŸåŸŸåä¸‹çš„å­åŸŸåä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥ Cookieï¼Œéœ€è¦è®¾ç½® Cookie çš„ domain å‚æ•°ã€‚</p> <p>Java ä¸­ä½¿ç”¨<code>setDomain(Stringdomain)</code>å’Œ<code>getDomain()</code>æ–¹æ³•æ¥è®¾ç½®ã€è·å– domainã€‚</p> <h3 id="cookie-çš„è·¯å¾„"><a href="#cookie-çš„è·¯å¾„" class="header-anchor">#</a> Cookie çš„è·¯å¾„</h3> <p>Path å±æ€§å†³å®šå…è®¸è®¿é—® Cookie çš„è·¯å¾„ã€‚</p> <p>Java ä¸­ä½¿ç”¨<code>setPath(Stringuri)</code>å’Œ<code>getPath()</code>æ–¹æ³•æ¥è®¾ç½®ã€è·å– pathã€‚</p> <h3 id="cookie-çš„å®‰å…¨å±æ€§"><a href="#cookie-çš„å®‰å…¨å±æ€§" class="header-anchor">#</a> Cookie çš„å®‰å…¨å±æ€§</h3> <p>HTTP åè®®ä¸ä»…æ˜¯æ— çŠ¶æ€çš„ï¼Œè€Œä¸”æ˜¯ä¸å®‰å…¨çš„ã€‚</p> <p>ä½¿ç”¨ HTTP åè®®çš„æ•°æ®ä¸ç»è¿‡ä»»ä½•åŠ å¯†å°±ç›´æ¥åœ¨ç½‘ç»œä¸Šä¼ æ’­ï¼Œæœ‰è¢«æˆªè·çš„å¯èƒ½ã€‚å¦‚æœä¸å¸Œæœ› Cookie åœ¨ HTTP ç­‰éå®‰å…¨åè®®ä¸­ä¼ è¾“ï¼Œå¯ä»¥è®¾ç½® Cookie çš„ secure å±æ€§ä¸º trueã€‚æµè§ˆå™¨åªä¼šåœ¨ HTTPS å’Œ SSL ç­‰å®‰å…¨åè®®ä¸­ä¼ è¾“æ­¤ç±» Cookieã€‚</p> <p>Java ä¸­ä½¿ç”¨<code>setSecure(booleanflag)</code>å’Œ<code>getSecure ()</code>æ–¹æ³•æ¥è®¾ç½®ã€è·å– Secureã€‚</p> <h3 id="cookie-å®ä¾‹"><a href="#cookie-å®ä¾‹" class="header-anchor">#</a> Cookie å®ä¾‹</h3> <h4 id="æ·»åŠ -cookie"><a href="#æ·»åŠ -cookie" class="header-anchor">#</a> æ·»åŠ  Cookie</h4> <p>é€šè¿‡ Servlet æ·»åŠ  Cookies åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š</p> <ol><li><p>åˆ›å»ºä¸€ä¸ª Cookie å¯¹è±¡ï¼šæ‚¨å¯ä»¥è°ƒç”¨å¸¦æœ‰ cookie åç§°å’Œ cookie å€¼çš„ Cookie æ„é€ å‡½æ•°ï¼Œcookie åç§°å’Œ cookie å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p></li> <li><p>è®¾ç½®æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼šæ‚¨å¯ä»¥ä½¿ç”¨ <code>setMaxAge</code> æ–¹æ³•æ¥æŒ‡å®š cookie èƒ½å¤Ÿä¿æŒæœ‰æ•ˆçš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</p></li> <li><p>å‘é€ Cookie åˆ° HTTP å“åº”å¤´ï¼šæ‚¨å¯ä»¥ä½¿ç”¨ <code>response.addCookie</code> æ¥æ·»åŠ  HTTP å“åº”å¤´ä¸­çš„ Cookiesã€‚</p></li></ol> <p>AddCookies.java</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">URLEncoder</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">Cookie</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/servlet/AddCookies&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AddCookies</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @see HttpServlet#HttpServlet()
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">AddCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
                    <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¸ºåå­—å’Œå§“æ°åˆ›å»º Cookie</span>
        <span class="token class-name">Cookie</span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸­æ–‡è½¬ç </span>
        <span class="token class-name">Cookie</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ä¸ºä¸¤ä¸ª Cookie è®¾ç½®è¿‡æœŸæ—¥æœŸä¸º 24 å°æ—¶å</span>
        name<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        url<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åœ¨å“åº”å¤´ä¸­æ·»åŠ ä¸¤ä¸ª Cookie</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> title <span class="token operator">=</span> <span class="token string">&quot;è®¾ç½® Cookie å®ä¾‹&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> docType <span class="token operator">=</span> <span class="token string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>docType <span class="token operator">+</span> <span class="token string">&quot;&lt;html&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span>
                        <span class="token operator">+</span> <span class="token string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> <span class="token operator">+</span> title
                        <span class="token operator">+</span> <span class="token string">&quot;&lt;/h1&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;ul&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;li&gt;&lt;b&gt;ç«™ç‚¹åï¼š&lt;/b&gt;ï¼š&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
                        <span class="token operator">+</span> <span class="token string">&quot;\n&lt;/li&gt;&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;li&gt;&lt;b&gt;ç«™ç‚¹ URLï¼š&lt;/b&gt;ï¼š&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span>
                        <span class="token operator">+</span> <span class="token string">&quot;\n&lt;/li&gt;&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;/ul&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
                    <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>addCookies.jsp</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">%</span>@ page language<span class="token operator">=</span><span class="token string">&quot;java&quot;</span> pageEncoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> <span class="token constant">HTML</span> <span class="token constant">PUBLIC</span> <span class="token string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">&gt;</span></span>
<span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token operator">&gt;</span>
  <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span>æ·»åŠ <span class="token class-name">Cookie</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
<span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token operator">/</span>servlet<span class="token operator">/</span><span class="token class-name">AddCookies</span> method<span class="token operator">=</span><span class="token string">&quot;GET&quot;</span><span class="token operator">&gt;</span>
  ç«™ç‚¹å ï¼š<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;name&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
  ç«™ç‚¹ <span class="token constant">URL</span>ï¼š<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;url&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token generics"><span class="token punctuation">&lt;</span>br<span class="token punctuation">&gt;</span></span>
  <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;æäº¤&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><h4 id="æ˜¾ç¤º-cookie"><a href="#æ˜¾ç¤º-cookie" class="header-anchor">#</a> æ˜¾ç¤º Cookie</h4> <p>è¦è¯»å– Cookiesï¼Œæ‚¨éœ€è¦é€šè¿‡è°ƒç”¨ <code>HttpServletRequest</code> çš„ <code>getCookies()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ª <code>javax.servlet.http.Cookie</code> å¯¹è±¡çš„æ•°ç»„ã€‚ç„¶åå¾ªç¯éå†æ•°ç»„ï¼Œå¹¶ä½¿ç”¨ <code>getName()</code> å’Œ <code>getValue()</code> æ–¹æ³•æ¥è®¿é—®æ¯ä¸ª cookie å’Œå…³è”çš„å€¼ã€‚</p> <p>ReadCookies.java</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">URLDecoder</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">Cookie</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/servlet/ReadCookies&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadCookies</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @see HttpServlet#HttpServlet()
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">ReadCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
                    <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–ä¸è¯¥åŸŸç›¸å…³çš„ Cookie çš„æ•°ç»„</span>
        cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> title <span class="token operator">=</span> <span class="token string">&quot;Delete Cookie Example&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> docType <span class="token operator">=</span> <span class="token string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>docType <span class="token operator">+</span> <span class="token string">&quot;&lt;html&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span>
                        <span class="token operator">+</span> <span class="token string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h2&gt;Cookie åç§°å’Œå€¼&lt;/h2&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cookies<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cookie <span class="token operator">=</span> cookies<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;å·²åˆ é™¤çš„ cookieï¼š&quot;</span> <span class="token operator">+</span> cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;åç§°ï¼š&quot;</span> <span class="token operator">+</span> cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ï¼Œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;å€¼ï¼š&quot;</span> <span class="token operator">+</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h2 class=\&quot;tutheader\&quot;&gt;No Cookie founds&lt;/h2&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
                    <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="åˆ é™¤-cookie"><a href="#åˆ é™¤-cookie" class="header-anchor">#</a> åˆ é™¤ Cookie</h4> <p>Java ä¸­å¹¶æ²¡æœ‰æä¾›ç›´æ¥åˆ é™¤ Cookie çš„æ–¹æ³•ï¼Œå¦‚æœæƒ³è¦åˆ é™¤ä¸€ä¸ª Cookieï¼Œç›´æ¥å°†è¿™ä¸ª Cookie çš„æœ‰æ•ˆæœŸè®¾ä¸º 0 å°±å¯ä»¥äº†ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p> <ol><li><p>è¯»å–ä¸€ä¸ªç°æœ‰çš„ cookieï¼Œå¹¶æŠŠå®ƒå­˜å‚¨åœ¨ Cookie å¯¹è±¡ä¸­ã€‚</p></li> <li><p>ä½¿ç”¨ <code>setMaxAge()</code> æ–¹æ³•è®¾ç½® cookie çš„å¹´é¾„ä¸ºé›¶ï¼Œæ¥åˆ é™¤ç°æœ‰çš„ cookieã€‚</p></li> <li><p>æŠŠè¿™ä¸ª cookie æ·»åŠ åˆ°å“åº”å¤´ã€‚</p></li></ol> <p>DeleteCookies.java</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">Cookie</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/servlet/DeleteCookies&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeleteCookies</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @see HttpServlet#HttpServlet()
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DeleteCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
                    <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–ä¸è¯¥åŸŸç›¸å…³çš„ Cookie çš„æ•°ç»„</span>
        cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> title <span class="token operator">=</span> <span class="token string">&quot;åˆ é™¤ Cookie å®ä¾‹&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> docType <span class="token operator">=</span> <span class="token string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>docType <span class="token operator">+</span> <span class="token string">&quot;&lt;html&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span>
                        <span class="token operator">+</span> <span class="token string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h2&gt;Cookie åç§°å’Œå€¼&lt;/h2&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cookies<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cookie <span class="token operator">=</span> cookies<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;å·²åˆ é™¤çš„ cookieï¼š&quot;</span> <span class="token operator">+</span> cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;åç§°ï¼š&quot;</span> <span class="token operator">+</span> cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ï¼Œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;å€¼ï¼š&quot;</span> <span class="token operator">+</span> cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h2 class=\&quot;tutheader\&quot;&gt;No Cookie founds&lt;/h2&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
                    <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="session"><a href="#session" class="header-anchor">#</a> Session</h2> <h3 id="session-æ˜¯ä»€ä¹ˆ"><a href="#session-æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> Session æ˜¯ä»€ä¹ˆ</h3> <p>ä¸åŒäº Cookie ä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ï¼ŒSession ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚</p> <p>å¦‚æœè¯´ Cookie æœºåˆ¶æ˜¯é€šè¿‡æ£€æŸ¥å®¢æˆ·èº«ä¸Šçš„â€œé€šè¡Œè¯â€æ¥ç¡®å®šå®¢æˆ·èº«ä»½çš„è¯ï¼Œé‚£ä¹ˆ Session æœºåˆ¶å°±æ˜¯é€šè¿‡æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„â€œå®¢æˆ·æ˜ç»†è¡¨â€æ¥ç¡®è®¤å®¢æˆ·èº«ä»½ã€‚</p> <p>Session å¯¹åº”çš„ç±»ä¸º <code>javax.servlet.http.HttpSession</code> ç±»ã€‚Session å¯¹è±¡æ˜¯åœ¨å®¢æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨æ—¶åˆ›å»ºçš„ã€‚</p> <h3 id="session-ç±»ä¸­çš„æ–¹æ³•"><a href="#session-ç±»ä¸­çš„æ–¹æ³•" class="header-anchor">#</a> Session ç±»ä¸­çš„æ–¹æ³•</h3> <p><code>javax.servlet.http.HttpSession</code> ç±»ä¸­çš„æ–¹æ³•ï¼š</p> <table><thead><tr><th><strong>æ–¹æ³•</strong></th> <th><strong>åŠŸèƒ½</strong></th></tr></thead> <tbody><tr><td>public Object getAttribute(String name)</td> <td>è¯¥æ–¹æ³•è¿”å›åœ¨è¯¥ session ä¼šè¯ä¸­å…·æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œåˆ™è¿”å› nullã€‚</td></tr> <tr><td>public Enumeration getAttributeNames()</td> <td>è¯¥æ–¹æ³•è¿”å› String å¯¹è±¡çš„æšä¸¾ï¼ŒString å¯¹è±¡åŒ…å«æ‰€æœ‰ç»‘å®šåˆ°è¯¥ session ä¼šè¯çš„å¯¹è±¡çš„åç§°ã€‚</td></tr> <tr><td>public long getCreationTime()</td> <td>è¯¥æ–¹æ³•è¿”å›è¯¥ session ä¼šè¯è¢«åˆ›å»ºçš„æ—¶é—´ï¼Œè‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</td></tr> <tr><td>public String getId()</td> <td>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«åˆ†é…ç»™è¯¥ session ä¼šè¯çš„å”¯ä¸€æ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²ã€‚</td></tr> <tr><td>public long getLastAccessedTime()</td> <td>è¯¥æ–¹æ³•è¿”å›å®¢æˆ·ç«¯æœ€åä¸€æ¬¡å‘é€ä¸è¯¥ session ä¼šè¯ç›¸å…³çš„è¯·æ±‚çš„æ—¶é—´è‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</td></tr> <tr><td>public int getMaxInactiveInterval()</td> <td>è¯¥æ–¹æ³•è¿”å› Servlet å®¹å™¨åœ¨å®¢æˆ·ç«¯è®¿é—®æ—¶ä¿æŒ session ä¼šè¯æ‰“å¼€çš„æœ€å¤§æ—¶é—´é—´éš”ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td></tr> <tr><td>public void invalidate()</td> <td>è¯¥æ–¹æ³•æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆï¼Œå¹¶è§£é™¤ç»‘å®šåˆ°å®ƒä¸Šé¢çš„ä»»ä½•å¯¹è±¡ã€‚</td></tr> <tr><td>public boolean isNew()</td> <td>å¦‚æœå®¢æˆ·ç«¯è¿˜ä¸çŸ¥é“è¯¥ session ä¼šè¯ï¼Œæˆ–è€…å¦‚æœå®¢æˆ·é€‰æ‹©ä¸å‚å…¥è¯¥ session ä¼šè¯ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› trueã€‚</td></tr> <tr><td>public void removeAttribute(String name)</td> <td>è¯¥æ–¹æ³•å°†ä»è¯¥ session ä¼šè¯ç§»é™¤æŒ‡å®šåç§°çš„å¯¹è±¡ã€‚</td></tr> <tr><td>public void setAttribute(String name, Object value)</td> <td>è¯¥æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åç§°ç»‘å®šä¸€ä¸ªå¯¹è±¡åˆ°è¯¥ session ä¼šè¯ã€‚</td></tr> <tr><td>public void setMaxInactiveInterval(int interval)</td> <td>è¯¥æ–¹æ³•åœ¨ Servlet å®¹å™¨æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆä¹‹å‰ï¼ŒæŒ‡å®šå®¢æˆ·ç«¯è¯·æ±‚ä¹‹é—´çš„æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td></tr></tbody></table> <h3 id="session-çš„æœ‰æ•ˆæœŸ"><a href="#session-çš„æœ‰æ•ˆæœŸ" class="header-anchor">#</a> Session çš„æœ‰æ•ˆæœŸ</h3> <p>ç”±äºä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·è®¿é—®æœåŠ¡å™¨ï¼Œå› æ­¤ Session ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚ä¸ºé˜²æ­¢å†…å­˜æº¢å‡ºï¼ŒæœåŠ¡å™¨ä¼šæŠŠé•¿æ—¶é—´æ²¡æœ‰æ´»è·ƒçš„ Session ä»å†…å­˜ä¸­åˆ é™¤ã€‚</p> <p>Session çš„è¶…æ—¶æ—¶é—´ä¸º<code>maxInactiveInterval</code>å±æ€§ï¼Œå¯ä»¥é€šè¿‡<code>getMaxInactiveInterval()</code>ã€<code>setMaxInactiveInterval(longinterval)</code>æ¥è¯»å†™è¿™ä¸ªå±æ€§ã€‚</p> <p>Tomcat ä¸­ Session çš„é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º 20 åˆ†é’Ÿã€‚å¯ä»¥ä¿®æ”¹ web.xml æ”¹å˜ Session çš„é»˜è®¤è¶…æ—¶æ—¶é—´ã€‚</p> <p>ä¾‹ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">&gt;</span></span>60<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="session-å¯¹æµè§ˆå™¨çš„è¦æ±‚"><a href="#session-å¯¹æµè§ˆå™¨çš„è¦æ±‚" class="header-anchor">#</a> Session å¯¹æµè§ˆå™¨çš„è¦æ±‚</h3> <p>HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒSession ä¸èƒ½ä¾æ® HTTP è¿æ¥æ¥åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€å®¢æˆ·ã€‚å› æ­¤æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æµè§ˆå™¨å‘é€ä¸€ä¸ªåä¸º JESSIONID çš„ Cookieï¼Œä»–çš„å€¼ä¸ºè¯¥ Session çš„ idï¼ˆä¹Ÿå°±æ˜¯ HttpSession.getId()çš„è¿”å›å€¼ï¼‰ã€‚Session ä¾æ®è¯¥ Cookie æ¥è¯†åˆ«æ˜¯å¦ä¸ºåŒä¸€ç”¨æˆ·ã€‚</p> <p>è¯¥ Cookie ä¸ºæœåŠ¡å™¨è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå®ƒçš„<code>maxAge</code>å±æ€§ä¸€èˆ¬ä¸º-1ï¼Œè¡¨ç¤ºä»…å½“å‰æµè§ˆå™¨å†…æœ‰æ•ˆï¼Œå¹¶ä¸”å„æµè§ˆå™¨çª—å£é—´ä¸å…±äº«ï¼Œå…³é—­æµè§ˆå™¨å°±ä¼šå¤±æ•ˆã€‚</p> <h3 id="url-åœ°å€é‡å†™"><a href="#url-åœ°å€é‡å†™" class="header-anchor">#</a> URL åœ°å€é‡å†™</h3> <p>URL åœ°å€é‡å†™çš„åŸç†æ˜¯å°†è¯¥ç”¨æˆ· Session çš„ id ä¿¡æ¯é‡å†™åˆ° URL åœ°å€ä¸­ã€‚æœåŠ¡å™¨èƒ½å¤Ÿè§£æé‡å†™åçš„ URL è·å– Session çš„ idã€‚è¿™æ ·å³ä½¿å®¢æˆ·ç«¯ä¸æ”¯æŒ Cookieï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Session æ¥è®°å½•ç”¨æˆ·çŠ¶æ€ã€‚</p> <p><code>HttpServletResponse</code>ç±»æä¾›äº†<code>encodeURL(Stringurl)</code>å®ç° URL åœ°å€é‡å†™ã€‚</p> <h3 id="session-ä¸­ç¦ç”¨-cookie"><a href="#session-ä¸­ç¦ç”¨-cookie" class="header-anchor">#</a> Session ä¸­ç¦ç”¨ Cookie</h3> <p>åœ¨<code>META-INF/context.xml</code>ä¸­ç¼–è¾‘å¦‚ä¸‹ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/SessionNotes<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cookies</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Context</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>éƒ¨ç½²åï¼ŒTOMCAT ä¾¿ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆå JESSIONID çš„ Cookieï¼ŒSession ä¹Ÿä¸ä¼šä»¥ Cookie ä¸ºè¯†åˆ«æ ‡å¿—ï¼Œè€Œä»…ä»…ä»¥é‡å†™åçš„ URL åœ°å€ä¸ºè¯†åˆ«æ ‡å¿—äº†ã€‚</p> <h3 id="session-å®ä¾‹"><a href="#session-å®ä¾‹" class="header-anchor">#</a> Session å®ä¾‹</h3> <h4 id="session-è·Ÿè¸ª"><a href="#session-è·Ÿè¸ª" class="header-anchor">#</a> Session è·Ÿè¸ª</h4> <p>SessionTrackServlet.java</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/servlet/SessionTrackServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionTrackServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
                    <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœä¸å­˜åœ¨ session ä¼šè¯ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª session å¯¹è±¡</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å– session åˆ›å»ºæ—¶é—´</span>
        <span class="token class-name">Date</span> createTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">getCreationTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–è¯¥ç½‘é¡µçš„æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´</span>
        <span class="token class-name">Date</span> lastAccessTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">getLastAccessedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è®¾ç½®æ—¥æœŸè¾“å‡ºçš„æ ¼å¼</span>
        <span class="token class-name">SimpleDateFormat</span> df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> title <span class="token operator">=</span> <span class="token string">&quot;Servlet Session å®ä¾‹&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> visitCount <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> visitCountKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;visitCount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> userIDKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;userID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> userID <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// æ£€æŸ¥ç½‘é¡µä¸Šæ˜¯å¦æœ‰æ–°çš„è®¿é—®è€…</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">isNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>userIDKey<span class="token punctuation">,</span> userID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            visitCount <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>visitCountKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
            visitCount <span class="token operator">=</span> visitCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            userID <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>userIDKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>visitCountKey<span class="token punctuation">,</span> visitCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> docType <span class="token operator">=</span> <span class="token string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>docType <span class="token operator">+</span> <span class="token string">&quot;&lt;html&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span>
                        <span class="token operator">+</span> <span class="token string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> <span class="token operator">+</span> title
                        <span class="token operator">+</span> <span class="token string">&quot;&lt;/h1&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;h2 align=\&quot;center\&quot;&gt;Session ä¿¡æ¯&lt;/h2&gt;\n&quot;</span>
                        <span class="token operator">+</span> <span class="token string">&quot;&lt;table border=\&quot;1\&quot; align=\&quot;center\&quot;&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;tr bgcolor=\&quot;#949494\&quot;&gt;\n&quot;</span>
                        <span class="token operator">+</span> <span class="token string">&quot;  &lt;th&gt;Session ä¿¡æ¯&lt;/th&gt;&lt;th&gt;å€¼&lt;/th&gt;&lt;/tr&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;tr&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;id&lt;/td&gt;\n&quot;</span>
                        <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;&quot;</span> <span class="token operator">+</span> session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;tr&gt;\n&quot;</span>
                        <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;&quot;</span> <span class="token operator">+</span> df<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>createTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;/td&gt;&lt;/tr&gt;\n&quot;</span>
                        <span class="token operator">+</span> <span class="token string">&quot;&lt;tr&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;æœ€åè®¿é—®æ—¶é—´&lt;/td&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;&quot;</span> <span class="token operator">+</span> df<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>lastAccessTime<span class="token punctuation">)</span>
                        <span class="token operator">+</span> <span class="token string">&quot;  &lt;/td&gt;&lt;/tr&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;tr&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;ç”¨æˆ· ID&lt;/td&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;&quot;</span> <span class="token operator">+</span> userID
                        <span class="token operator">+</span> <span class="token string">&quot;  &lt;/td&gt;&lt;/tr&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;tr&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;è®¿é—®ç»Ÿè®¡ï¼š&lt;/td&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;  &lt;td&gt;&quot;</span> <span class="token operator">+</span> visitCount
                        <span class="token operator">+</span> <span class="token string">&quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;/table&gt;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>web.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>SessionTrackServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>SessionTrackServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>SessionTrackServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/servlet/SessionTrackServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="åˆ é™¤-session-ä¼šè¯æ•°æ®"><a href="#åˆ é™¤-session-ä¼šè¯æ•°æ®" class="header-anchor">#</a> åˆ é™¤ Session ä¼šè¯æ•°æ®</h4> <p>å½“æ‚¨å®Œæˆäº†ä¸€ä¸ªç”¨æˆ·çš„ session ä¼šè¯æ•°æ®ï¼Œæ‚¨æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š</p> <p>**ç§»é™¤ä¸€ä¸ªç‰¹å®šçš„å±æ€§ï¼š**æ‚¨å¯ä»¥è°ƒç”¨ <code>removeAttribute(String name)</code> æ–¹æ³•æ¥åˆ é™¤ä¸ç‰¹å®šçš„é”®ç›¸å…³è”çš„å€¼ã€‚</p> <p>**åˆ é™¤æ•´ä¸ª session ä¼šè¯ï¼š**æ‚¨å¯ä»¥è°ƒç”¨ <code>invalidate()</code> æ–¹æ³•æ¥ä¸¢å¼ƒæ•´ä¸ª session ä¼šè¯ã€‚</p> <p>**è®¾ç½® session ä¼šè¯è¿‡æœŸæ—¶é—´ï¼š**æ‚¨å¯ä»¥è°ƒç”¨ <code>setMaxInactiveInterval(int interval)</code> æ–¹æ³•æ¥å•ç‹¬è®¾ç½® session ä¼šè¯è¶…æ—¶ã€‚</p> <p>**æ³¨é”€ç”¨æˆ·ï¼š**å¦‚æœä½¿ç”¨çš„æ˜¯æ”¯æŒ servlet 2.4 çš„æœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ <code>logout</code> æ¥æ³¨é”€ Web æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼Œå¹¶æŠŠå±äºæ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰ session ä¼šè¯è®¾ç½®ä¸ºæ— æ•ˆã€‚</p> <p>**web.xml é…ç½®ï¼š**å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Tomcatï¼Œé™¤äº†ä¸Šè¿°æ–¹æ³•ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ web.xml æ–‡ä»¶ä¸­é…ç½® session ä¼šè¯è¶…æ—¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">&gt;</span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸Šé¢å®ä¾‹ä¸­çš„è¶…æ—¶æ—¶é—´æ˜¯ä»¥åˆ†é’Ÿä¸ºå•ä½ï¼Œå°†è¦†ç›– Tomcat ä¸­é»˜è®¤çš„ 30 åˆ†é’Ÿè¶…æ—¶æ—¶é—´ã€‚</p> <p>åœ¨ä¸€ä¸ª Servlet ä¸­çš„ <code>getMaxInactiveInterval()</code> æ–¹æ³•ä¼šè¿”å› session ä¼šè¯çš„è¶…æ—¶æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨ web.xml ä¸­é…ç½® session ä¼šè¯è¶…æ—¶æ—¶é—´ä¸º 15 åˆ†é’Ÿï¼Œé‚£ä¹ˆ<code>getMaxInactiveInterval()</code> ä¼šè¿”å› 900ã€‚</p> <h2 id="cookie-vs-session"><a href="#cookie-vs-session" class="header-anchor">#</a> Cookie vs Session</h2> <h3 id="å­˜å–æ–¹å¼"><a href="#å­˜å–æ–¹å¼" class="header-anchor">#</a> å­˜å–æ–¹å¼</h3> <p>Cookie åªèƒ½ä¿å­˜<code>ASCII</code>å­—ç¬¦ä¸²ï¼Œå¦‚æœéœ€è¦å­˜å– Unicode å­—ç¬¦æˆ–äºŒè¿›åˆ¶æ•°æ®ï¼Œéœ€è¦è¿›è¡Œ<code>UTF-8</code>ã€<code>GBK</code>æˆ–<code>BASE64</code>ç­‰æ–¹å¼çš„ç¼–ç ã€‚</p> <p>Session å¯ä»¥å­˜å–ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œç”šè‡³æ˜¯ä»»ä½• Java ç±»ã€‚å¯ä»¥å°† Session çœ‹æˆæ˜¯ä¸€ä¸ª Java å®¹å™¨ç±»ã€‚</p> <h3 id="éšç§å®‰å…¨"><a href="#éšç§å®‰å…¨" class="header-anchor">#</a> éšç§å®‰å…¨</h3> <p>Cookie å­˜äºå®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œä¸€äº›å®¢æˆ·ç«¯çš„ç¨‹åºå¯èƒ½ä¼šçª¥æ¢ã€å¤åˆ¶æˆ–ä¿®æ”¹ Cookie å†…å®¹ã€‚</p> <p>Session å­˜äºæœåŠ¡å™¨ï¼Œå¯¹å®¢æˆ·ç«¯æ˜¯é€æ˜çš„ï¼Œä¸å­˜åœ¨æ•æ„Ÿä¿¡æ¯æ³„éœ²çš„å±é™©ã€‚</p> <h3 id="æœ‰æ•ˆæœŸ"><a href="#æœ‰æ•ˆæœŸ" class="header-anchor">#</a> æœ‰æ•ˆæœŸ</h3> <p>ä½¿ç”¨ Cookie å¯ä»¥ä¿è¯é•¿æ—¶é—´ç™»å½•æœ‰æ•ˆï¼Œåªè¦è®¾ç½® Cookie çš„<code>maxAge</code>å±æ€§ä¸ºä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ã€‚</p> <p>è€Œ Session è™½ç„¶ç†è®ºä¸Šä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®å¾ˆå¤§çš„æ•°å€¼æ¥ä¿æŒé•¿æ—¶é—´ç™»å½•æœ‰æ•ˆï¼Œä½†æ˜¯ï¼Œç”±äº Session ä¾èµ–äºåä¸º<code>JESSIONID</code>çš„ Cookieï¼Œè€Œ Cookie <code>JESSIONID</code>çš„<code>maxAge</code>é»˜è®¤ä¸º-1ï¼Œåªè¦å…³é—­äº†æµè§ˆå™¨è¯¥ Session å°±ä¼šå¤±æ•ˆï¼Œå› æ­¤ï¼ŒSession ä¸èƒ½å®ç°ä¿¡æ¯æ°¸ä¹…æœ‰æ•ˆçš„æ•ˆæœã€‚ä½¿ç”¨ URL åœ°å€é‡å†™ä¹Ÿä¸èƒ½å®ç°ã€‚</p> <h3 id="æœåŠ¡å™¨çš„å¼€é”€"><a href="#æœåŠ¡å™¨çš„å¼€é”€" class="header-anchor">#</a> æœåŠ¡å™¨çš„å¼€é”€</h3> <p>ç”±äº Session æ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨çš„ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½ä¼šäº§ç”Ÿä¸€ä¸ª Sessionï¼Œå¦‚æœå¹¶å‘è®¿é—®çš„ç”¨æˆ·éå¸¸å¤šï¼Œä¼šäº§ç”Ÿå¾ˆå¤šçš„ Sessionï¼Œæ¶ˆè€—å¤§é‡çš„å†…å­˜ã€‚</p> <p>è€Œ Cookie ç”±äºä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸Šï¼Œæ‰€ä»¥ä¸å ç”¨æœåŠ¡å™¨èµ„æºã€‚</p> <h3 id="æµè§ˆå™¨çš„æ”¯æŒ"><a href="#æµè§ˆå™¨çš„æ”¯æŒ" class="header-anchor">#</a> æµè§ˆå™¨çš„æ”¯æŒ</h3> <p>Cookie éœ€è¦æµè§ˆå™¨æ”¯æŒæ‰èƒ½ä½¿ç”¨ã€‚</p> <p>å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ Cookieï¼Œéœ€è¦ä½¿ç”¨ Session ä»¥åŠ URL åœ°å€é‡å†™ã€‚</p> <p>éœ€è¦æ³¨æ„çš„äº‹æ‰€æœ‰çš„ç”¨åˆ° Session ç¨‹åºçš„ URL éƒ½è¦ä½¿ç”¨<code>response.encodeURL(StringURL)</code> æˆ–<code>response.encodeRediretURL(String URL)</code>è¿›è¡Œ URL åœ°å€é‡å†™ï¼Œå¦åˆ™å¯¼è‡´ Session ä¼šè¯è·Ÿè¸ªå¤±æ•ˆã€‚</p> <h3 id="è·¨åŸŸå"><a href="#è·¨åŸŸå" class="header-anchor">#</a> è·¨åŸŸå</h3> <ul><li>Cookie æ”¯æŒè·¨åŸŸåã€‚</li> <li>Session ä¸æ”¯æŒè·¨åŸŸåã€‚</li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/java-tutorial/edit/master/docs/01.Java/02.JavaEE/01.JavaWeb/04.JavaWebä¹‹Cookieå’ŒSession.md" target="_blank" rel="noopener noreferrer">ğŸ“ å¸®åŠ©æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/java-tutorial/tags/?tag=Java" title="æ ‡ç­¾">#Java</a><a href="/java-tutorial/tags/?tag=JavaWeb" title="æ ‡ç­¾">#JavaWeb</a><a href="/java-tutorial/tags/?tag=Cookie" title="æ ‡ç­¾">#Cookie</a><a href="/java-tutorial/tags/?tag=Session" title="æ ‡ç­¾">#Session</a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2024/12/31, 08:02:35</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/java-tutorial/pages/82df5f/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">JavaWeb ä¹‹ Filter å’Œ Listener</div></a> <a href="/java-tutorial/pages/e175ce/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">JavaWeb é¢ç»</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/java-tutorial/pages/82df5f/" class="prev">JavaWeb ä¹‹ Filter å’Œ Listener</a></span> <span class="next"><a href="/java-tutorial/pages/e175ce/">JavaWeb é¢ç»</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/java-tutorial/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/java-tutorial/pages/191cdb/"><div>
            Spring Data ç»¼åˆ
            <!----></div></a> <span class="date">02-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/java-tutorial/pages/65e4a2/"><div>
            Spring è®¿é—® Redis
            <!----></div></a> <span class="date">01-31</span></dt></dl><dl><dd>03</dd> <dt><a href="/java-tutorial/pages/1f743f/"><div>
            Spring EL è¡¨è¾¾å¼
            <!----></div></a> <span class="date">01-12</span></dt></dl> <dl><dd></dd> <dt><a href="/java-tutorial/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:forbreak@163.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/dunwu" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2019-2024
    <span>é’æ‚Ÿï¼ˆdunwuï¼‰ | CC-BY-SA-4.0</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">Ã—</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="261" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 40px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"></div></div>
    <script src="/java-tutorial/assets/js/app.daf69751.js" defer></script><script src="/java-tutorial/assets/js/2.bc9223e0.js" defer></script><script src="/java-tutorial/assets/js/8.e2e9dd66.js" defer></script>
  </body>
</html>
