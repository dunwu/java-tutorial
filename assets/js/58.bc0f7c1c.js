(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{421:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"jsoup-快速入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jsoup-快速入门"}},[t._v("#")]),t._v(" Jsoup 快速入门")]),t._v(" "),s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[t._v("jsoup 是一款 Java 的 HTML 解析器，可直接解析某个 URL 地址、HTML 文本内容。它提供了一套非常省力的 API，可通过 DOM，CSS 以及类似于 JQuery 的操作方法来取出和操作数据。")]),t._v(" "),s("p",[t._v("jsoup 工作的流程主要如下：")]),t._v(" "),s("ol",[s("li",[t._v("从一个 URL，文件或字符串中解析 HTML，并加载为一个 "),s("code",[t._v("Document")]),t._v(" 对象。")]),t._v(" "),s("li",[t._v("使用 DOM 或 CSS 选择器来取出数据；")]),t._v(" "),s("li",[t._v("可操作 HTML 元素、属性、文本。")])]),t._v(" "),s("p",[t._v("jsoup 是基于 MIT 协议发布的，可放心使用于商业项目。")]),t._v(" "),s("h2",{attrs:{id:"加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载"}},[t._v("#")]),t._v(" 加载")]),t._v(" "),s("h3",{attrs:{id:"从-html-字符串加载一个文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从-html-字符串加载一个文档"}},[t._v("#")]),t._v(" 从 HTML 字符串加载一个文档")]),t._v(" "),s("p",[t._v("使用静态 "),s("code",[t._v("Jsoup.parse(String html)")]),t._v(" 方法或 "),s("code",[t._v("Jsoup.parse(String html, String baseUri)")]),t._v(" 示例代码：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" html "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<html><head><title>First parse</title></head>"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<body><p>Parsed HTML into a doc.</p></body></html>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Document")]),t._v(" doc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jsoup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[s("code",[t._v("parse(String html, String baseUri)")]),t._v(" 这方法能够将输入的 HTML 解析为一个新的文档 (Document），参数 baseUri 是用来将相对 URL 转成绝对 URL，并指定从哪个网站获取文档。如这个方法不适用，你可以使用 "),s("code",[t._v("parse(String html)")]),t._v(" 方法来解析成 HTML 字符串如上面的示例。")]),t._v(" "),s("p",[t._v("只要解析的不是空字符串，就能返回一个结构合理的文档，其中包含(至少) 一个 head 和一个 body 元素。")]),t._v(" "),s("p",[t._v("一旦拥有了一个 Document，你就可以使用 Document 中适当的方法或它父类 "),s("code",[t._v("Element")]),t._v("和"),s("code",[t._v("Node")]),t._v("中的方法来取得相关数据。")])]),t._v(" "),s("h3",{attrs:{id:"解析一个-body-片断"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解析一个-body-片断"}},[t._v("#")]),t._v(" 解析一个 body 片断")]),t._v(" "),s("p",[s("strong",[t._v("问题")])]),t._v(" "),s("p",[t._v("假如你有一个 HTML 片断 (比如. 一个 "),s("code",[t._v("div")]),t._v(" 包含一对 "),s("code",[t._v("p")]),t._v(" 标签; 一个不完整的 HTML 文档) 想对它进行解析。这个 HTML 片断可以是用户提交的一条评论或在一个 CMS 页面中编辑 body 部分。")]),t._v(" "),s("p",[s("strong",[t._v("办法")])]),t._v(" "),s("p",[t._v("使用"),s("code",[t._v("Jsoup.parseBodyFragment(String html)")]),t._v("方法.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('String html = "<div><p>Lorem ipsum.</p>";\nDocument doc = Jsoup.parseBodyFragment(html);\nElement body = doc.body();\n')])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[s("code",[t._v("parseBodyFragment")]),t._v(" 方法创建一个空壳的文档，并插入解析过的 HTML 到"),s("code",[t._v("body")]),t._v("元素中。假如你使用正常的 "),s("code",[t._v("Jsoup.parse(String html)")]),t._v(" 方法，通常你也可以得到相同的结果，但是明确将用户输入作为 body 片段处理，以确保用户所提供的任何糟糕的 HTML 都将被解析成 body 元素。")]),t._v(" "),s("p",[s("code",[t._v("Document.body()")]),t._v(" 方法能够取得文档 body 元素的所有子元素，与 "),s("code",[t._v('doc.getElementsByTag("body")')]),t._v("相同。")])]),t._v(" "),s("h4",{attrs:{id:"保证安全-stay-safe"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#保证安全-stay-safe"}},[t._v("#")]),t._v(" 保证安全 Stay safe")]),t._v(" "),s("p",[t._v("假如你可以让用户输入 HTML 内容，那么要小心避免跨站脚本攻击。利用基于 "),s("code",[t._v("Whitelist")]),t._v(" 的清除器和 "),s("code",[t._v("clean(String bodyHtml, Whitelist whitelist)")]),t._v("方法来清除用户输入的恶意内容。")]),t._v(" "),s("h3",{attrs:{id:"从-url-加载一个文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从-url-加载一个文档"}},[t._v("#")]),t._v(" 从 URL 加载一个文档")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("Jsoup.connect(String url)")]),t._v("方法")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Document")]),t._v(" doc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jsoup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://example.com/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[s("code",[t._v("connect(String url)")]),t._v(" 方法创建一个新的 "),s("code",[t._v("Connection")]),t._v(", 和 "),s("code",[t._v("get()")]),t._v(" 取得和解析一个 HTML 文件。如果从该 URL 获取 HTML 时发生错误，便会抛出 IOException，应适当处理。")])]),t._v(" "),s("p",[s("code",[t._v("Connection")]),t._v(" 接口还提供一个方法链来解决特殊请求，具体如下：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Document")]),t._v(" doc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jsoup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://example.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Java"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("userAgent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mozilla"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cookie")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"auth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"从一个文件加载一个文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从一个文件加载一个文档"}},[t._v("#")]),t._v(" 从一个文件加载一个文档")]),t._v(" "),s("p",[t._v("可以使用静态 "),s("code",[t._v("Jsoup.parse(File in, String charsetName, String baseUri)")]),t._v(" 方法")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),t._v(" input "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/tmp/input.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Document")]),t._v(" doc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jsoup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://example.com/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[s("code",[t._v("parse(File in, String charsetName, String baseUri)")]),t._v(" 这个方法用来加载和解析一个 HTML 文件。如在加载文件的时候发生错误，将抛出 IOException，应作适当处理。")]),t._v(" "),s("p",[s("code",[t._v("baseUri")]),t._v(" 参数用于解决文件中 URLs 是相对路径的问题。如果不需要可以传入一个空的字符串。")]),t._v(" "),s("p",[t._v("另外还有一个方法"),s("code",[t._v("parse(File in, String charsetName)")]),t._v(" ，它使用文件的路径做为 "),s("code",[t._v("baseUri")]),t._v("。 这个方法适用于如果被解析文件位于网站的本地文件系统，且相关链接也指向该文件系统。")])]),t._v(" "),s("h2",{attrs:{id:"解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解析"}},[t._v("#")]),t._v(" 解析")]),t._v(" "),s("h3",{attrs:{id:"使用-dom-方法来遍历一个文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-dom-方法来遍历一个文档"}},[t._v("#")]),t._v(" 使用 DOM 方法来遍历一个文档")]),t._v(" "),s("p",[s("strong",[t._v("问题")])]),t._v(" "),s("p",[t._v("你有一个 HTML 文档要从中提取数据，并了解这个 HTML 文档的结构。")]),t._v(" "),s("p",[s("strong",[t._v("方法")])]),t._v(" "),s("p",[t._v("将 HTML 解析成一个"),s("code",[t._v("Document")]),t._v("之后，就可以使用类似于 DOM 的方法进行操作。示例代码：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),t._v(" input "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/tmp/input.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Document")]),t._v(" doc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jsoup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://example.com/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),t._v(" content "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Elements")]),t._v(" links "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsByTag")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),t._v(" link "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" links"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" linkHref "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("attr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"href"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" linkText "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[s("code",[t._v("Elements")]),t._v(" 这个对象提供了一系列类似于 DOM 的方法来查找元素，抽取并处理其中的数据。")]),t._v(" "),s("p",[t._v("具体如下：")]),t._v(" "),s("h4",{attrs:{id:"查找元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查找元素"}},[t._v("#")]),t._v(" 查找元素")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("getElementById(String id)")])]),t._v(" "),s("li",[s("code",[t._v("getElementsByTag(String tag)")])]),t._v(" "),s("li",[s("code",[t._v("getElementsByClass(String className)")])]),t._v(" "),s("li",[s("code",[t._v("getElementsByAttribute(String key)")]),t._v(" (and related methods)")]),t._v(" "),s("li",[t._v("Element siblings: "),s("code",[t._v("siblingElements()")]),t._v(", "),s("code",[t._v("firstElementSibling()")]),t._v(", "),s("code",[t._v("lastElementSibling()")]),t._v(";"),s("code",[t._v("nextElementSibling()")]),t._v(", "),s("code",[t._v("previousElementSibling()")])]),t._v(" "),s("li",[t._v("Graph: "),s("code",[t._v("parent()")]),t._v(", "),s("code",[t._v("children()")]),t._v(", "),s("code",[t._v("child(int index)")])])]),t._v(" "),s("h4",{attrs:{id:"元素数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#元素数据"}},[t._v("#")]),t._v(" 元素数据")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("attr(String key)")]),t._v("获取属性"),s("code",[t._v("attr(String key, String value)")]),t._v("设置属性")]),t._v(" "),s("li",[s("code",[t._v("attributes()")]),t._v("获取所有属性")]),t._v(" "),s("li",[s("code",[t._v("id()")]),t._v(", "),s("code",[t._v("className()")]),t._v(" and "),s("code",[t._v("classNames()")])]),t._v(" "),s("li",[s("code",[t._v("text()")]),t._v("获取文本内容"),s("code",[t._v("text(String value)")]),t._v(" 设置文本内容")]),t._v(" "),s("li",[s("code",[t._v("html()")]),t._v("获取元素内 HTML"),s("code",[t._v("html(String value)")]),t._v("设置元素内的 HTML 内容")]),t._v(" "),s("li",[s("code",[t._v("outerHtml()")]),t._v("获取元素外 HTML 内容")]),t._v(" "),s("li",[s("code",[t._v("data()")]),t._v("获取数据内容（例如：script 和 style 标签)")]),t._v(" "),s("li",[s("code",[t._v("tag()")]),t._v(" and "),s("code",[t._v("tagName()")])])]),t._v(" "),s("h4",{attrs:{id:"操作-html-和文本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作-html-和文本"}},[t._v("#")]),t._v(" 操作 HTML 和文本")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("append(String html)")]),t._v(", "),s("code",[t._v("prepend(String html)")])]),t._v(" "),s("li",[s("code",[t._v("appendText(String text)")]),t._v(", "),s("code",[t._v("prependText(String text)")])]),t._v(" "),s("li",[s("code",[t._v("appendElement(String tagName)")]),t._v(", "),s("code",[t._v("prependElement(String tagName)")])]),t._v(" "),s("li",[s("code",[t._v("html(String value)")])])]),t._v(" "),s("h3",{attrs:{id:"使用选择器语法来查找元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用选择器语法来查找元素"}},[t._v("#")]),t._v(" 使用选择器语法来查找元素")]),t._v(" "),s("p",[s("strong",[t._v("问题")])]),t._v(" "),s("p",[t._v("你想使用类似于 CSS 或 jQuery 的语法来查找和操作元素。")]),t._v(" "),s("p",[s("strong",[t._v("方法")])]),t._v(" "),s("p",[t._v("可以使用"),s("code",[t._v("Element.select(String selector)")]),t._v(" 和 "),s("code",[t._v("Elements.select(String selector)")]),t._v(" 方法实现：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),t._v(" input "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/tmp/input.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Document")]),t._v(" doc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jsoup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://example.com/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Elements")]),t._v(" links "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a[href]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//带有href属性的a元素")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Elements")]),t._v(" pngs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"img[src$=.png]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//扩展名为.png的图片")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),t._v(" masthead "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div.masthead"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//class等于masthead的div标签")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Elements")]),t._v(" resultLinks "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"h3.r > a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在h3元素之后的a元素")]),t._v("\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("jsoup elements 对象支持类似于"),s("a",{attrs:{href:"http://www.w3.org/TR/2009/PR-css3-selectors-20091215/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS"),s("OutboundLink")],1),t._v(" (或"),s("a",{attrs:{href:"http://jquery.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jquery"),s("OutboundLink")],1),t._v(")的选择器语法，来实现非常强大和灵活的查找功能。.")]),t._v(" "),s("p",[t._v("这个"),s("code",[t._v("select")]),t._v(" 方法在"),s("code",[t._v("Document")]),t._v(", "),s("code",[t._v("Element")]),t._v(",或"),s("code",[t._v("Elements")]),t._v("对象中都可以使用。且是上下文相关的，因此可实现指定元素的过滤，或者链式选择访问。")]),t._v(" "),s("p",[t._v("Select 方法将返回一个"),s("code",[t._v("Elements")]),t._v("集合，并提供一组方法来抽取和处理结果。")])]),t._v(" "),s("h4",{attrs:{id:"selector-选择器概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#selector-选择器概述"}},[t._v("#")]),t._v(" Selector 选择器概述")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("tagname")]),t._v(": 通过标签查找元素，比如："),s("code",[t._v("a")])]),t._v(" "),s("li",[s("code",[t._v("ns|tag")]),t._v(": 通过标签在命名空间查找元素，比如：可以用 "),s("code",[t._v("fb|name")]),t._v(" 语法来查找 `` 元素")]),t._v(" "),s("li",[s("code",[t._v("#id")]),t._v(": 通过 ID 查找元素，比如："),s("code",[t._v("#logo")])]),t._v(" "),s("li",[s("code",[t._v(".class")]),t._v(": 通过 class 名称查找元素，比如："),s("code",[t._v(".masthead")])]),t._v(" "),s("li",[s("code",[t._v("[attribute]")]),t._v(": 利用属性查找元素，比如："),s("code",[t._v("[href]")])]),t._v(" "),s("li",[s("code",[t._v("[^attr]")]),t._v(": 利用属性名前缀来查找元素，比如：可以用"),s("code",[t._v("[^data-]")]),t._v(" 来查找带有 HTML5 Dataset 属性的元素")]),t._v(" "),s("li",[s("code",[t._v("[attr=value]")]),t._v(": 利用属性值来查找元素，比如："),s("code",[t._v("[width=500]")])]),t._v(" "),s("li",[s("code",[t._v("[attr^=value]")]),t._v(", "),s("code",[t._v("[attr$=value]")]),t._v(", "),s("code",[t._v("[attr*=value]")]),t._v(": 利用匹配属性值开头、结尾或包含属性值来查找元素，比如："),s("code",[t._v("[href*=/path/]")])]),t._v(" "),s("li",[s("code",[t._v("[attr\\~=regex]")]),t._v(": 利用属性值匹配正则表达式来查找元素，比如： "),s("code",[t._v("img[src\\~=(?i)\\.(png|jpe?g)]")])]),t._v(" "),s("li",[s("code",[t._v("*")]),t._v(": 这个符号将匹配所有元素")])]),t._v(" "),s("h4",{attrs:{id:"selector-选择器组合使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#selector-选择器组合使用"}},[t._v("#")]),t._v(" Selector 选择器组合使用")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("el##id")]),t._v(": 元素+ID，比如： "),s("code",[t._v("div##logo")])]),t._v(" "),s("li",[s("code",[t._v("el.class")]),t._v(": 元素+class，比如： "),s("code",[t._v("div.masthead")])]),t._v(" "),s("li",[s("code",[t._v("el[attr]")]),t._v(": 元素+class，比如： "),s("code",[t._v("a[href]")])]),t._v(" "),s("li",[t._v("任意组合，比如："),s("code",[t._v("a[href].highlight")])]),t._v(" "),s("li",[s("code",[t._v("ancestor child")]),t._v(": 查找某个元素下子元素，比如：可以用"),s("code",[t._v(".body p")]),t._v(' 查找在"body"元素下的所有'),s("code",[t._v("p")]),t._v("元素")]),t._v(" "),s("li",[s("code",[t._v("parent > child")]),t._v(": 查找某个父元素下的直接子元素，比如：可以用"),s("code",[t._v("div.content > p")]),t._v(" 查找 "),s("code",[t._v("p")]),t._v(" 元素，也可以用"),s("code",[t._v("body > *")]),t._v(" 查找 body 标签下所有直接子元素")]),t._v(" "),s("li",[s("code",[t._v("siblingA + siblingB")]),t._v(": 查找在 A 元素之前第一个同级元素 B，比如："),s("code",[t._v("div.head + div")])]),t._v(" "),s("li",[s("code",[t._v("siblingA \\~ siblingX")]),t._v(": 查找 A 元素之前的同级 X 元素，比如："),s("code",[t._v("h1 \\~ p")])]),t._v(" "),s("li",[s("code",[t._v("el, el, el")]),t._v(":多个选择器组合，查找匹配任一选择器的唯一元素，例如："),s("code",[t._v("div.masthead, div.logo")])])]),t._v(" "),s("h4",{attrs:{id:"伪选择器-selectors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#伪选择器-selectors"}},[t._v("#")]),t._v(" 伪选择器 selectors")]),t._v(" "),s("ul",[s("li",[s("code",[t._v(":lt(n)")]),t._v(": 查找哪些元素的同级索引值（它的位置在 DOM 树中是相对于它的父节点）小于 n，比如："),s("code",[t._v("td:lt(3)")]),t._v(" 表示小于三列的元素")]),t._v(" "),s("li",[s("code",[t._v(":gt(n)")]),t._v(":查找哪些元素的同级索引值大于"),s("code",[t._v("n``，比如")]),t._v("： "),s("code",[t._v("div p:gt(2)")]),t._v("表示哪些 div 中有包含 2 个以上的 p 元素")]),t._v(" "),s("li",[s("code",[t._v(":eq(n)")]),t._v(": 查找哪些元素的同级索引值与"),s("code",[t._v("n")]),t._v("相等，比如："),s("code",[t._v("form input:eq(1)")]),t._v("表示包含一个 input 标签的 Form 元素")]),t._v(" "),s("li",[s("code",[t._v(":has(seletor)")]),t._v(": 查找匹配选择器包含元素的元素，比如："),s("code",[t._v("div:has(p)")]),t._v("表示哪些 div 包含了 p 元素")]),t._v(" "),s("li",[s("code",[t._v(":not(selector)")]),t._v(": 查找与选择器不匹配的元素，比如： "),s("code",[t._v("div:not(.logo)")]),t._v(" 表示不包含 class=logo 元素的所有 div 列表")]),t._v(" "),s("li",[s("code",[t._v(":contains(text)")]),t._v(": 查找包含给定文本的元素，搜索不区分大不写，比如： "),s("code",[t._v("p:contains(jsoup)")])]),t._v(" "),s("li",[s("code",[t._v(":containsOwn(text)")]),t._v(": 查找直接包含给定文本的元素")]),t._v(" "),s("li",[s("code",[t._v(":matches(regex)")]),t._v(": 查找哪些元素的文本匹配指定的正则表达式，比如："),s("code",[t._v("div:matches((?i)login)")])]),t._v(" "),s("li",[s("code",[t._v(":matchesOwn(regex)")]),t._v(": 查找自身包含文本匹配指定正则表达式的元素")]),t._v(" "),s("li",[t._v("注意：上述伪选择器索引是从 0 开始的，也就是说第一个元素索引值为 0，第二个元素 index 为 1 等")])]),t._v(" "),s("p",[t._v("可以查看"),s("code",[t._v("Selector")]),t._v(" API 参考来了解更详细的内容")]),t._v(" "),s("h3",{attrs:{id:"从元素抽取属性-文本和-html"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从元素抽取属性-文本和-html"}},[t._v("#")]),t._v(" 从元素抽取属性，文本和 HTML")]),t._v(" "),s("p",[s("strong",[t._v("问题")])]),t._v(" "),s("p",[t._v("在解析获得一个 Document 实例对象，并查找到一些元素之后，你希望取得在这些元素中的数据。")]),t._v(" "),s("p",[s("strong",[t._v("方法")])]),t._v(" "),s("ul",[s("li",[t._v("要取得一个属性的值，可以使用"),s("code",[t._v("Node.attr(String key)")]),t._v(" 方法")]),t._v(" "),s("li",[t._v("对于一个元素中的文本，可以使用"),s("code",[t._v("Element.text()")]),t._v("方法")]),t._v(" "),s("li",[t._v("对于要取得元素或属性中的 HTML 内容，可以使用"),s("code",[t._v("Element.html()")]),t._v(", 或 "),s("code",[t._v("Node.outerHtml()")]),t._v("方法")])]),t._v(" "),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" html "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"<p>An <a href='http://example.com/'><b>example</b></a> link.</p>\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Document")]),t._v(" doc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jsoup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//解析HTML字符串返回一个Document实现")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),t._v(" link "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//查找第一个a元素")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "An example link"//取得字符串中的文本')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" linkHref "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("attr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"href"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "http://example.com/"//取得链接地址')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" linkText "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "example""//取得链接地址中的文本')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" linkOuterH "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("outerHtml")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "<a href="http://example.com"><b>example</b></a>"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" linkInnerH "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "<b>example</b>"//取得链接内的html内容')]),t._v("\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("上述方法是元素数据访问的核心办法。此外还其它一些方法可以使用：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Element.id()")])]),t._v(" "),s("li",[s("code",[t._v("Element.tagName()")])]),t._v(" "),s("li",[s("code",[t._v("Element.className()")]),t._v(" and "),s("code",[t._v("Element.hasClass(String className)")])])]),t._v(" "),s("p",[t._v("这些访问器方法都有相应的 setter 方法来更改数据")])]),t._v(" "),s("p",[s("strong",[t._v("参见")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Element")]),t._v("和"),s("code",[t._v("Elements")]),t._v("集合类的参考文档")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.open-open.com/jsoup/working-with-urls.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("URLs 处理"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.open-open.com/jsoup/selector-syntax.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 CSS 选择器语法来查找元素"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"处理-urls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#处理-urls"}},[t._v("#")]),t._v(" 处理 URLs")]),t._v(" "),s("p",[s("strong",[t._v("问题")])]),t._v(" "),s("p",[t._v("你有一个包含相对 URLs 路径的 HTML 文档，需要将这些相对路径转换成绝对路径的 URLs。")]),t._v(" "),s("p",[s("strong",[t._v("方法")])]),t._v(" "),s("ol",[s("li",[t._v("在你解析文档时确保有指定"),s("code",[t._v("base URI")]),t._v("，然后")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("abs:")]),t._v(" 属性前缀来取得包含"),s("code",[t._v("base URI")]),t._v("的绝对路径。代码如下：")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Document")]),t._v(" doc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jsoup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.open-open.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),t._v(" link "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" relHref "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("attr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"href"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// == "/"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" absHref "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("attr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"abs:href"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "http://www.open-open.com/"')]),t._v("\n\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("在 HTML 元素中，URLs 经常写成相对于文档位置的相对路径： "),s("code",[t._v('<a href="/download">...</a>')]),t._v(". 当你使用 "),s("code",[t._v("Node.attr(String key)")]),t._v(" 方法来取得 a 元素的 href 属性时，它将直接返回在 HTML 源码中指定定的值。")]),t._v(" "),s("p",[t._v("假如你需要取得一个绝对路径，需要在属性名前加 "),s("code",[t._v("abs:")]),t._v(" 前缀。这样就可以返回包含根路径的 URL 地址"),s("code",[t._v('attr("abs:href")')])]),t._v(" "),s("p",[t._v("因此，在解析 HTML 文档时，定义 base URI 非常重要。")]),t._v(" "),s("p",[t._v("如果你不想使用"),s("code",[t._v("abs:")]),t._v(" 前缀，还有一个方法能够实现同样的功能 "),s("code",[t._v("Node.absUrl(String key)")]),t._v("。")])]),t._v(" "),s("h2",{attrs:{id:"数据修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据修改"}},[t._v("#")]),t._v(" 数据修改")]),t._v(" "),s("h3",{attrs:{id:"设置属性的值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置属性的值"}},[t._v("#")]),t._v(" 设置属性的值")]),t._v(" "),s("p",[s("strong",[t._v("问题")])]),t._v(" "),s("p",[t._v("在你解析一个 "),s("code",[t._v("Document")]),t._v(" 之后可能想修改其中的某些属性值，然后再保存到磁盘或都输出到前台页面。")]),t._v(" "),s("p",[s("strong",[t._v("方法")])]),t._v(" "),s("p",[t._v("可以使用属性设置方法 "),s("code",[t._v("Element.attr(String key, String value)")]),t._v(", 和 "),s("code",[t._v("Elements.attr(String key, String value)")]),t._v(".")]),t._v(" "),s("p",[t._v("假如你需要修改一个元素的 "),s("code",[t._v("class")]),t._v(" 属性，可以使用 "),s("code",[t._v("Element.addClass(String className)")]),t._v(" 和"),s("code",[t._v("Element.removeClass(String className)")]),t._v(" 方法。")]),t._v(" "),s("p",[s("code",[t._v("Elements")]),t._v(" 提供了批量操作元素属性和 class 的方法，比如：要为 div 中的每一个 a 元素都添加一个"),s("code",[t._v('rel="nofollow"')]),t._v(" 可以使用如下方法：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('doc.select("div.comments a").attr("rel", "nofollow");\n\n')])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("与"),s("code",[t._v("Element")]),t._v("中的其它方法一样，"),s("code",[t._v("attr")]),t._v(" 方法也是返回当 "),s("code",[t._v("Element")]),t._v(" (或在使用选择器是返回 "),s("code",[t._v("Elements")]),t._v("集合)。这样能够很方便使用方法连用的书写方式。比如：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('doc.select("div.masthead").attr("title", "jsoup").addClass("round-box");\n')])])])]),t._v(" "),s("h3",{attrs:{id:"设置一个元素的-html-内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置一个元素的-html-内容"}},[t._v("#")]),t._v(" 设置一个元素的 HTML 内容")]),t._v(" "),s("p",[s("strong",[t._v("问题")])]),t._v(" "),s("p",[t._v("你需要一个元素中的 HTML 内容")]),t._v(" "),s("p",[s("strong",[t._v("方法")])]),t._v(" "),s("p",[t._v("可以使用"),s("code",[t._v("Element")]),t._v("中的 HTML 设置方法具体如下：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),t._v(" div "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <div></div>")]),t._v("\ndiv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<p>lorem ipsum</p>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <div><p>lorem ipsum</p></div>")]),t._v("\ndiv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("prepend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<p>First</p>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在div前添加html内容")]),t._v("\ndiv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<p>Last</p>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在div之后添加html内容")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添完后的结果: <div><p>First</p><p>lorem ipsum</p><p>Last</p></div>")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),t._v(" span "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"span"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <span>One</span>")]),t._v("\nspan"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"<li><a href='http://example.com/'></a></li>\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 添完后的结果: <li><a href="http://example.com"><span>One</span></a></li>')]),t._v("\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Element.html(String html)")]),t._v(" 这个方法将先清除元素中的 HTML 内容，然后用传入的 HTML 代替。")]),t._v(" "),s("li",[s("code",[t._v("Element.prepend(String first)")]),t._v(" 和 "),s("code",[t._v("Element.append(String last)")]),t._v(" 方法用于在分别在元素内部 HTML 的前面和后面添加 HTML 内容")]),t._v(" "),s("li",[s("code",[t._v("Element.wrap(String around)")]),t._v(" 对元素包裹一个外部 HTML 内容。")])]),t._v(" "),s("p",[s("strong",[t._v("参见")])]),t._v(" "),s("p",[t._v("可以查看 API 参考文档中 "),s("code",[t._v("Element.prependElement(String tag)")]),t._v("和"),s("code",[t._v("Element.appendElement(String tag)")]),t._v(" 方法来创建新的元素并作为文档的子元素插入其中。")])]),t._v(" "),s("h3",{attrs:{id:"设置元素的文本内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置元素的文本内容"}},[t._v("#")]),t._v(" 设置元素的文本内容")]),t._v(" "),s("p",[s("strong",[t._v("问题")])]),t._v(" "),s("p",[t._v("你需要修改一个 HTML 文档中的文本内容")]),t._v(" "),s("p",[s("strong",[t._v("方法")])]),t._v(" "),s("p",[t._v("可以使用"),s("code",[t._v("Element")]),t._v("的设置方法：:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('Element div = doc.select("div").first(); // <div></div>\ndiv.text("five > four"); // <div>five &gt; four</div>\ndiv.prepend("First ");\ndiv.append(" Last");\n// now: <div>First five &gt; four Last</div>\n')])])]),s("blockquote",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("文本设置方法与 "),s("a",{attrs:{href:"http://jsoup.org/cookbook/modifying-data/set-html",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTML setter"),s("OutboundLink")],1),t._v(" 方法一样：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Element.text(String text)")]),t._v(" 将清除一个元素中的内部 HTML 内容，然后提供的文本进行代替")]),t._v(" "),s("li",[s("code",[t._v("Element.prepend(String first)")]),t._v(" 和 "),s("code",[t._v("Element.append(String last)")]),t._v(" 将分别在元素的内部 html 前后添加文本节点。")])]),t._v(" "),s("p",[t._v("对于传入的文本如果含有像 "),s("code",[t._v("<")]),t._v(", "),s("code",[t._v(">")]),t._v(" 等这样的字符，将以文本处理，而非 HTML。")])]),t._v(" "),s("h2",{attrs:{id:"html-清理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#html-清理"}},[t._v("#")]),t._v(" HTML 清理")]),t._v(" "),s("h3",{attrs:{id:"消除不受信任的-html-来防止-xss-攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#消除不受信任的-html-来防止-xss-攻击"}},[t._v("#")]),t._v(" 消除不受信任的 HTML (来防止 XSS 攻击)")]),t._v(" "),s("p",[s("strong",[t._v("问题")])]),t._v(" "),s("p",[t._v("在做网站的时候，经常会提供用户评论的功能。有些不怀好意的用户，会搞一些脚本到评论内容中，而这些脚本可能会破坏整个页面的行为，更严重的是获取一些机要信息，此时需要清理该 HTML，以避免跨站脚本"),s("a",{attrs:{href:"http://en.wikipedia.org/wiki/Cross-site_scripting",target:"_blank",rel:"noopener noreferrer"}},[t._v("cross-site scripting"),s("OutboundLink")],1),t._v("攻击（XSS）。")]),t._v(" "),s("p",[s("strong",[t._v("方法")])]),t._v(" "),s("p",[t._v("使用 jsoup HTML "),s("code",[t._v("Cleaner")]),t._v(" 方法进行清除，但需要指定一个可配置的 "),s("code",[t._v("Whitelist")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" unsafe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"<p><a href='http://example.com/' onclick='stealCookies()'>Link</a></p>\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" safe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jsoup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("unsafe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Whitelist")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("basic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// now: <p><a href="http://example.com/" rel="nofollow">Link</a></p>')]),t._v("\n")])])]),s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("XSS 又叫 CSS (Cross Site Script) ，跨站脚本攻击。它指的是恶意攻击者往 Web 页面里插入恶意 html 代码，当用户浏览该页之时，嵌入其中 Web 里面的 html 代码会被执行，从而达到恶意攻击用户的特殊目的。XSS 属于被动式的攻击，因为其被动且不好利用，所以许多人常忽略其危害性。所以我们经常只让用户输入纯文本的内容，但这样用户体验就比较差了。")]),t._v(" "),s("p",[t._v("一个更好的解决方法就是使用一个富文本编辑器 WYSIWYG 如 "),s("a",{attrs:{href:"http://ckeditor.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CKEditor"),s("OutboundLink")],1),t._v(" 和 "),s("a",{attrs:{href:"http://tinymce.moxiecode.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("TinyMCE"),s("OutboundLink")],1),t._v("。这些可以输出 HTML 并能够让用户可视化编辑。虽然他们可以在客户端进行校验，但是这样还不够安全，需要在服务器端进行校验并清除有害的 HTML 代码，这样才能确保输入到你网站的 HTML 是安全的。否则，攻击者能够绕过客户端的 Javascript 验证，并注入不安全的 HMTL 直接进入您的网站。")]),t._v(" "),s("p",[t._v("jsoup 的 whitelist 清理器能够在服务器端对用户输入的 HTML 进行过滤，只输出一些安全的标签和属性。")]),t._v(" "),s("p",[t._v("jsoup 提供了一系列的 "),s("code",[t._v("Whitelist")]),t._v(" 基本配置，能够满足大多数要求；但如有必要，也可以进行修改，不过要小心。")]),t._v(" "),s("p",[t._v("这个 cleaner 非常好用不仅可以避免 XSS 攻击，还可以限制用户可以输入的标签范围。")]),t._v(" "),s("p",[s("strong",[t._v("参见")])]),t._v(" "),s("ul",[s("li",[t._v("参阅"),s("a",{attrs:{href:"http://ha.ckers.org/xss.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("XSS cheat sheet"),s("OutboundLink")],1),t._v(" ，有一个例子可以了解为什么不能使用正则表达式，而采用安全的 whitelist parser-based 清理器才是正确的选择。")]),t._v(" "),s("li",[t._v("参阅"),s("code",[t._v("Cleaner")]),t._v(" ，了解如何返回一个 "),s("code",[t._v("Document")]),t._v(" 对象，而不是字符串")]),t._v(" "),s("li",[t._v("参阅"),s("code",[t._v("Whitelist")]),t._v("，了解如何创建一个自定义的 whitelist")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://en.wikipedia.org/wiki/Nofollow",target:"_blank",rel:"noopener noreferrer"}},[t._v("nofollow"),s("OutboundLink")],1),t._v(" 链接属性了解")])]),t._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/jhy/jsoup",target:"_blank",rel:"noopener noreferrer"}},[t._v("jsoup github 托管代码"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://jsoup.org/cookbook/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jsoup Cookbook"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.open-open.com/jsoup/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jsoup Cookbook(中文版)"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/code4craft/jsoup-learning",target:"_blank",rel:"noopener noreferrer"}},[t._v("不错的 jsoup 学习笔记"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);