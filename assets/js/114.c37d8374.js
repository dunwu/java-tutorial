(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{477:function(t,n,a){"use strict";a.r(n);var e=a(14),_=Object(e.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"springboot-之-banner-定制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#springboot-之-banner-定制"}},[t._v("#")]),t._v(" SpringBoot 之 banner 定制")]),t._v(" "),n("h2",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),n("p",[t._v("Spring Boot 启动时默认会显示以下 LOGO：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.1.1.RELEASE)\n")])])]),n("p",[t._v("实际上，Spring Boot 支持自定义 logo 的功能。")]),t._v(" "),n("p",[t._v("让我们来看看如何实现的。")]),t._v(" "),n("p",[t._v("只要你在 "),n("code",[t._v("resources")]),t._v(" 目录下放置名为 "),n("code",[t._v("banner.txt")]),t._v("、"),n("code",[t._v("banner.gif")]),t._v(" 、"),n("code",[t._v("banner.jpg")]),t._v(" 或 "),n("code",[t._v("banner.png")]),t._v(" 的文件，Spring Boot 会自动加载，将其作为启动时打印的 logo。")]),t._v(" "),n("ul",[n("li",[t._v("对于文本文件，Spring Boot 会将其直接输出。")]),t._v(" "),n("li",[t._v("对于图像文件（ "),n("code",[t._v("banner.gif")]),t._v(" 、"),n("code",[t._v("banner.jpg")]),t._v(" 或 "),n("code",[t._v("banner.png")]),t._v(" ），Spring Boot 会将图像转为 ASCII 字符，然后输出。")])]),t._v(" "),n("h2",{attrs:{id:"变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[t._v("#")]),t._v(" 变量")]),t._v(" "),n("p",[t._v("banner.txt 文件中还可以使用变量来设置字体、颜色、版本号。")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("变量")]),t._v(" "),n("th",[t._v("描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("${application.version}")])]),t._v(" "),n("td",[n("code",[t._v("MANIFEST.MF")]),t._v(" 中定义的版本。如："),n("code",[t._v("1.0")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("${application.formatted-version}")])]),t._v(" "),n("td",[n("code",[t._v("MANIFEST.MF")]),t._v(" 中定义的版本，并添加一个 "),n("code",[t._v("v")]),t._v(" 前缀。如："),n("code",[t._v("v1.0")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("${spring-boot.version}")])]),t._v(" "),n("td",[t._v("Spring Boot 版本。如："),n("code",[t._v("2.1.1.RELEASE")]),t._v(".")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("${spring-boot.formatted-version}")])]),t._v(" "),n("td",[t._v("Spring Boot 版本，并添加一个 "),n("code",[t._v("v")]),t._v(" 前缀。如："),n("code",[t._v("v2.1.1.RELEASE")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("${Ansi.NAME}")]),t._v(" (or "),n("code",[t._v("${AnsiColor.NAME}")]),t._v(", "),n("code",[t._v("${AnsiBackground.NAME}")]),t._v(", "),n("code",[t._v("${AnsiStyle.NAME}")]),t._v(")")]),t._v(" "),n("td",[t._v("ANSI 颜色、字体。更多细节，参考："),n("a",{attrs:{href:"https://github.com/spring-projects/spring-boot/tree/v2.1.1.RELEASE/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/ansi/AnsiPropertySource.java",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("AnsiPropertySource")]),n("OutboundLink")],1),t._v("。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("${application.title}")])]),t._v(" "),n("td",[n("code",[t._v("MANIFEST.MF")]),t._v(" 中定义的应用名。")])])])]),t._v(" "),n("p",[t._v("示例：")]),t._v(" "),n("p",[t._v("在 Spring Boot 项目中的 "),n("code",[t._v("resources")]),t._v(" 目录下添加一个名为 banner.txt 的文件，内容如下：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("${AnsiColor.BRIGHT_YELLOW}${AnsiStyle.BOLD}\n ________  ___  ___  ________   ___       __   ___  ___\n|\\   ___ \\|\\  \\|\\  \\|\\   ___  \\|\\  \\     |\\  \\|\\  \\|\\  \\\n\\ \\  \\_|\\ \\ \\  \\\\\\  \\ \\  \\\\ \\  \\ \\  \\    \\ \\  \\ \\  \\\\\\  \\\n \\ \\  \\ \\\\ \\ \\  \\\\\\  \\ \\  \\\\ \\  \\ \\  \\  __\\ \\  \\ \\  \\\\\\  \\\n  \\ \\  \\_\\\\ \\ \\  \\\\\\  \\ \\  \\\\ \\  \\ \\  \\|\\__\\_\\  \\ \\  \\\\\\  \\\n   \\ \\_______\\ \\_______\\ \\__\\\\ \\__\\ \\____________\\ \\_______\\\n    \\|_______|\\|_______|\\|__| \\|__|\\|____________|\\|_______|\n${AnsiBackground.WHITE}${AnsiColor.RED}${AnsiStyle.UNDERLINE}\n:: Spring Boot ::             (v${spring-boot.version})\n:: Spring Boot Tutorial ::    (v1.0.0)\n")])])]),n("blockquote",[n("p",[t._v("注："),n("code",[t._v("${}")]),t._v(" 设置字体颜色的变量之间不能换行或空格分隔，否则会导致除最后一个变量外，都不生效。")])]),t._v(" "),n("p",[t._v("启动应用后，控制台将打印如下 logo：")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/master/snap/20181221231330.png",alt:"img"}}),t._v("\n推荐两个生成字符画的网站，可以将生成的字符串放入这个"),n("code",[t._v("banner.txt")]),t._v(" 文件：")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://www.network-science.de/ascii/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.network-science.de/ascii/"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"http://patorjk.com/software/taag/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://patorjk.com/software/taag/"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),n("p",[n("code",[t._v("application.properties")]),t._v(" 中与 Banner 相关的配置：")]),t._v(" "),n("div",{staticClass:"language-properties extra-class"},[n("pre",{pre:!0,attrs:{class:"language-properties"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# banner 模式。有三种模式：console/log/off")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# console 打印到控制台（通过 System.out）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# log - 打印到日志中")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# off - 关闭打印")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.main.banner-mode")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("off")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# banner 文件编码")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.banner.charset")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("UTF-8")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# banner 文本文件路径")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.banner.location")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("classpath:banner.txt")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# banner 图像文件路径（可以选择 png,jpg,gif 文件）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.banner.image.location")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("classpath:banner.gif")]),t._v("\nused).\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 图像 banner 的宽度（字符数）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.banner.image.width")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("76")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 图像 banner 的高度（字符数）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.banner.image.height")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("=")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 图像 banner 的左边界（字符数）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.banner.image.margin")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("2")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 是否将图像转为黑色控制台主题")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.banner.image.invert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("false")]),t._v("\n")])])]),n("p",[t._v("当然，你也可以在 YAML 文件中配置，例如：")]),t._v(" "),n("div",{staticClass:"language-yml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-yml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("banner-mode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" off\n")])])]),n("h2",{attrs:{id:"编程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编程"}},[t._v("#")]),t._v(" 编程")]),t._v(" "),n("p",[t._v("默认，Spring Boot 会注册一个 "),n("code",[t._v("SpringBootBanner")]),t._v(" 的单例 Bean，用来负责打印 Banner。")]),t._v(" "),n("p",[t._v("如果想完全个人定制 Banner，可以这么做：先实现 "),n("code",[t._v("org.springframework.boot.Banner#printBanner")]),t._v(" 接口来自己定制 Banner。在将这个 Banner 通过 "),n("code",[t._v("SpringApplication.setBanner(…)")]),t._v(" 方法注入 Spring Boot。")]),t._v(" "),n("h2",{attrs:{id:"示例源码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例源码"}},[t._v("#")]),t._v(" 示例源码")]),t._v(" "),n("blockquote",[n("p",[t._v("示例源码："),n("a",{attrs:{href:"https://github.com/dunwu/spring-boot-tutorial/tree/master/codes/spring-boot-banner",target:"_blank",rel:"noopener noreferrer"}},[t._v("spring-boot-banner"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-banner",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot 官方文档之 Customizing the Banner"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=_.exports}}]);