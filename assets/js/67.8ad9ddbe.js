(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{430:function(e,t,a){"use strict";a.r(t);var n=a(14),r=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"spring-bean"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean"}},[e._v("#")]),e._v(" Spring Bean")]),e._v(" "),t("p",[e._v("åœ¨ Spring ä¸­ï¼Œæ„æˆåº”ç”¨ç¨‹åºä¸»ä½“ç”± Spring IoC å®¹å™¨ç®¡ç†çš„å¯¹è±¡ç§°ä¸º Beanã€‚"),t("strong",[e._v("Bean æ˜¯ç”± Spring IoC å®¹å™¨å®ä¾‹åŒ–ã€è£…é…å’Œç®¡ç†çš„å¯¹è±¡")]),e._v("ã€‚ Bean ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»åæ˜ åœ¨å®¹å™¨ä½¿ç”¨çš„é…ç½®å…ƒæ•°æ®ä¸­ã€‚")]),e._v(" "),t("h2",{attrs:{id:"spring-bean-å®šä¹‰"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-å®šä¹‰"}},[e._v("#")]),e._v(" Spring Bean å®šä¹‰")]),e._v(" "),t("h3",{attrs:{id:"beandefinition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#beandefinition"}},[e._v("#")]),e._v(" BeanDefinition")]),e._v(" "),t("p",[e._v("Spring IoC å®¹å™¨æœ¬èº«ï¼Œå¹¶ä¸èƒ½è¯†åˆ«é…ç½®çš„å…ƒæ•°æ®ã€‚ä¸ºæ­¤ï¼Œè¦å°†è¿™äº›é…ç½®ä¿¡æ¯è½¬ä¸º Spring èƒ½è¯†åˆ«çš„æ ¼å¼â€”â€”"),t("code",[e._v("BeanDefinition")]),e._v(" å¯¹è±¡ã€‚")]),e._v(" "),t("p",[t("strong",[t("code",[e._v("BeanDefinition")]),e._v(" æ˜¯ Spring ä¸­å®šä¹‰ Bean çš„é…ç½®å…ƒä¿¡æ¯æ¥å£")]),e._v("ï¼Œå®ƒåŒ…å«ï¼š")]),e._v(" "),t("ul",[t("li",[e._v("Bean ç±»å")]),e._v(" "),t("li",[e._v("Bean è¡Œä¸ºé…ç½®å…ƒç´ ï¼Œå¦‚ï¼šä½œç”¨åŸŸã€è‡ªåŠ¨ç»‘å®šçš„æ¨¡å¼ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰")]),e._v(" "),t("li",[e._v("å…¶ä»– Bean å¼•ç”¨ï¼Œä¹Ÿå¯ç§°ä¸ºåˆä½œè€…ï¼ˆCollaboratorsï¼‰æˆ–ä¾èµ–ï¼ˆDependenciesï¼‰")]),e._v(" "),t("li",[e._v("é…ç½®è®¾ç½®ï¼Œå¦‚ Bean å±æ€§ï¼ˆPropertiesï¼‰")])]),e._v(" "),t("h4",{attrs:{id:"beandefinition-å…ƒä¿¡æ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#beandefinition-å…ƒä¿¡æ¯"}},[e._v("#")]),e._v(" BeanDefinition å…ƒä¿¡æ¯")]),e._v(" "),t("p",[t("code",[e._v("BeanDefinition")]),e._v(" å…ƒä¿¡æ¯å¦‚ä¸‹ï¼š")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("å±æ€§ï¼ˆPropertyï¼‰")]),e._v(" "),t("th",[e._v("è¯´æ˜")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class",target:"_blank",rel:"noopener noreferrer"}},[e._v("Class"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("å…¨ç±»åï¼Œå¿…é¡»æ˜¯å…·ä½“ç±»ï¼Œä¸èƒ½ç”¨æŠ½è±¡ç±»æˆ–æ¥å£")])]),e._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-beanname",target:"_blank",rel:"noopener noreferrer"}},[e._v("Name"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("Bean çš„åç§°æˆ–è€… ID")])]),e._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes",target:"_blank",rel:"noopener noreferrer"}},[e._v("Scope"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("Bean çš„ä½œç”¨åŸŸï¼ˆå¦‚ï¼š"),t("code",[e._v("singleton")]),e._v("ã€"),t("code",[e._v("prototype")]),e._v(" ç­‰ï¼‰")])]),e._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators",target:"_blank",rel:"noopener noreferrer"}},[e._v("Constructor arguments"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("Bean æ„é€ å™¨å‚æ•°ï¼ˆç”¨äºä¾èµ–æ³¨å…¥ï¼‰")])]),e._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators",target:"_blank",rel:"noopener noreferrer"}},[e._v("Properties"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("Bean å±æ€§è®¾ç½®ï¼ˆç”¨äºä¾èµ–æ³¨å…¥ï¼‰")])]),e._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-autowire",target:"_blank",rel:"noopener noreferrer"}},[e._v("Autowiring mode"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("Bean è‡ªåŠ¨ç»‘å®šæ¨¡å¼ï¼ˆå¦‚ï¼šé€šè¿‡åç§° byNameï¼‰")])]),e._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lazy-init",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lazy initialization mode"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("Bean å»¶è¿Ÿåˆå§‹åŒ–æ¨¡å¼ï¼ˆå»¶è¿Ÿå’Œéå»¶è¿Ÿï¼‰")])]),e._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-initializingbean",target:"_blank",rel:"noopener noreferrer"}},[e._v("Initialization method"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("Bean åˆå§‹åŒ–å›è°ƒæ–¹æ³•åç§°")])]),e._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-disposablebean",target:"_blank",rel:"noopener noreferrer"}},[e._v("Destruction method"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("Bean é”€æ¯å›è°ƒæ–¹æ³•åç§°")])])])]),e._v(" "),t("h4",{attrs:{id:"beandefinition-æ„å»º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#beandefinition-æ„å»º"}},[e._v("#")]),e._v(" BeanDefinition æ„å»º")]),e._v(" "),t("p",[e._v("BeanDefinition æ„å»ºæ–¹å¼ï¼š")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("é€šè¿‡ "),t("code",[e._v("BeanDefinitionBuilder")])])]),e._v(" "),t("li",[t("p",[e._v("é€šè¿‡ "),t("code",[e._v("AbstractBeanDefinition")]),e._v(" ä»¥åŠæ´¾ç”Ÿç±»")])])]),e._v(" "),t("blockquote",[t("p",[e._v("ğŸ’» Spring Bean å®šä¹‰ç¤ºä¾‹æºç ï¼š"),t("a",{attrs:{href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanDefinitionTests.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("BeanDefinitionTests"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"spring-bean-å‘½å"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-å‘½å"}},[e._v("#")]),e._v(" Spring Bean å‘½å")]),e._v(" "),t("h4",{attrs:{id:"spring-bean-å‘½åè§„åˆ™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-å‘½åè§„åˆ™"}},[e._v("#")]),e._v(" Spring Bean å‘½åè§„åˆ™")]),e._v(" "),t("p",[e._v("æ¯ä¸ª Bean æ‹¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡è¯†ç¬¦ï¼ˆidentifiersï¼‰ï¼Œè¿™äº›æ ‡è¯†ç¬¦åœ¨ Bean æ‰€åœ¨çš„å®¹å™¨å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚é€šå¸¸ï¼Œä¸€ä¸ª Bean ä»…æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¦‚æœéœ€è¦é¢å¤–çš„ï¼Œå¯è€ƒè™‘ä½¿ç”¨åˆ«åï¼ˆAliasï¼‰æ¥æ‰©å……ã€‚")]),e._v(" "),t("p",[e._v("åœ¨åŸºäº XML çš„é…ç½®å…ƒä¿¡æ¯ä¸­ï¼Œå¼€å‘äººå‘˜"),t("strong",[e._v("å¯ä»¥ä½¿ç”¨ "),t("code",[e._v("id")]),e._v(" å±æ€§ã€"),t("code",[e._v("name")]),e._v(" å±æ€§æˆ–æ¥æŒ‡å®š Bean æ ‡è¯†ç¬¦")]),e._v("ã€‚é€šå¸¸ï¼ŒBean çš„æ ‡è¯†ç¬¦ç”±å­—æ¯ç»„æˆï¼Œå…è®¸å‡ºç°ç‰¹æ®Šå­—ç¬¦ã€‚å¦‚æœè¦æƒ³å¼•å…¥ Bean çš„åˆ«åçš„è¯ï¼Œå¯åœ¨ "),t("code",[e._v("name")]),e._v(" å±æ€§ä½¿ç”¨åŠè§’é€—å·ï¼ˆâ€œ,â€ï¼‰æˆ–åˆ†å·ï¼ˆâ€œ;â€) æ¥é—´éš”ã€‚")]),e._v(" "),t("p",[e._v("Spring ä¸­ï¼Œ"),t("strong",[e._v("ä¸º Bean æŒ‡å®š "),t("code",[e._v("id")]),e._v(" å’Œ "),t("code",[e._v("name")]),e._v(" å±æ€§ä¸æ˜¯å¿…é¡»çš„")]),e._v("ã€‚å¦‚æœä¸æŒ‡å®šï¼ŒSpring ä¼šè‡ªåŠ¨ä¸º Bean åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„åç§°ã€‚å°½ç®¡ Bean çš„å‘½åæ²¡æœ‰é™åˆ¶ï¼Œä¸è¿‡"),t("strong",[e._v("å®˜æ–¹å»ºè®®é‡‡ç”¨é©¼å³°å‘½åæ³•æ¥å‘½å Bean")]),e._v("ã€‚")]),e._v(" "),t("h4",{attrs:{id:"spring-bean-å‘½åç”Ÿæˆå™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-å‘½åç”Ÿæˆå™¨"}},[e._v("#")]),e._v(" Spring Bean å‘½åç”Ÿæˆå™¨")]),e._v(" "),t("p",[e._v("Spring æä¾›äº†ä¸¤ç§ Spring Bean å‘½åç”Ÿæˆå™¨ï¼š")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("DefaultBeanNameGenerator")]),e._v("ï¼šé»˜è®¤é€šç”¨ "),t("code",[e._v("BeanNameGenerator")]),e._v(" å®ç°ã€‚")]),e._v(" "),t("li",[t("code",[e._v("AnnotationBeanNameGenerator")]),e._v("ï¼šåŸºäºæ³¨è§£æ‰«æçš„ "),t("code",[e._v("BeanNameGenerator")]),e._v(" å®ç°ã€‚")])]),e._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("interface")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("BeanNameGenerator")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("String")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("generateBeanName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("BeanDefinition")]),e._v(" definition"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("BeanDefinitionRegistry")]),e._v(" registry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h4",{attrs:{id:"spring-bean-åˆ«å"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-åˆ«å"}},[e._v("#")]),e._v(" Spring Bean åˆ«å")]),e._v(" "),t("p",[e._v("Spring æ”¯æŒé€šè¿‡ "),t("code",[e._v("<alias>")]),e._v(" å±æ€§ä¸º Bean è®¾ç½®åˆ«åã€‚")]),e._v(" "),t("p",[e._v("Bean åˆ«åï¼ˆAliasï¼‰çš„ä½œç”¨ï¼š")]),e._v(" "),t("ul",[t("li",[e._v("å¤ç”¨ç°æœ‰çš„ "),t("code",[e._v("BeanDefinition")])]),e._v(" "),t("li",[e._v("æ›´å…·æœ‰åœºæ™¯åŒ–çš„å‘½åæ–¹æ³•ï¼Œæ¯”å¦‚ï¼š\n"),t("ul",[t("li",[t("code",[e._v('<alias name="myApp-dataSource" alias="subsystemA-dataSource"/>')])]),e._v(" "),t("li",[t("code",[e._v('<alias name="myApp-dataSource" alias="subsystemB-dataSource"/>')])])])])]),e._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("bean")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("id")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("class")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("io.github.dunwu.spring.core.bean.entity.person.User"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("\x3c!-- å±æ€§ç•¥ --\x3e")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("bean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("alias")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("alias")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("aliasUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("/>")])]),e._v("\n")])])]),t("h2",{attrs:{id:"spring-bean-ç”Ÿå‘½å‘¨æœŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-ç”Ÿå‘½å‘¨æœŸ"}},[e._v("#")]),e._v(" Spring Bean ç”Ÿå‘½å‘¨æœŸ")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/master/snap/20211201102734.png",alt:""}})]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Spring å¯¹ Bean è¿›è¡Œå®ä¾‹åŒ–ï¼ˆç›¸å½“äº new XXX()ï¼‰")])]),e._v(" "),t("li",[t("p",[e._v("Spring å°†å€¼å’Œå¼•ç”¨æ³¨å…¥åˆ° Bean å¯¹åº”çš„å±æ€§ä¸­")])]),e._v(" "),t("li",[t("p",[e._v("å¦‚æœ Bean å®ç°äº† "),t("code",[e._v("BeanNameAware")]),e._v(" æ¥å£ï¼ŒSpring å°† Bean çš„ ID ä¼ é€’ç»™ "),t("code",[e._v("setBeanName")]),e._v(" æ–¹æ³•")]),e._v(" "),t("ul",[t("li",[e._v("ä½œç”¨æ˜¯é€šè¿‡ Bean çš„å¼•ç”¨æ¥è·å¾— Bean IDï¼Œä¸€èˆ¬ä¸šåŠ¡ä¸­æ˜¯å¾ˆå°‘æœ‰ç”¨åˆ° Bean çš„ ID çš„")])])]),e._v(" "),t("li",[t("p",[e._v("å¦‚æœ Bean å®ç°äº† "),t("code",[e._v("BeanFactoryAware")]),e._v(" æ¥å£ï¼ŒSpring å°†è°ƒç”¨ "),t("code",[e._v("setBeanDactory")]),e._v(" æ–¹æ³•ï¼Œå¹¶æŠŠ "),t("code",[e._v("BeanFactory")]),e._v(" å®¹å™¨å®ä¾‹ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚")]),e._v(" "),t("ul",[t("li",[e._v("ä½œç”¨æ˜¯è·å– Spring å®¹å™¨ï¼Œå¦‚ Bean é€šè¿‡ Spring å®¹å™¨å‘å¸ƒäº‹ä»¶ç­‰")])])]),e._v(" "),t("li",[t("p",[e._v("å¦‚æœ Bean å®ç°äº† "),t("code",[e._v("ApplicationContextAware")]),e._v(" æ¥å£ï¼ŒSpring å®¹å™¨å°†è°ƒç”¨ "),t("code",[e._v("setApplicationContext")]),e._v(" æ–¹æ³•ï¼ŒæŠŠåº”ç”¨ä¸Šä¸‹æ–‡ä½œä¸ºå‚æ•°ä¼ å…¥")]),e._v(" "),t("ul",[t("li",[e._v("ä½œç”¨ä¸ "),t("code",[e._v("BeanFactory")]),e._v(" ç±»ä¼¼éƒ½æ˜¯ä¸ºäº†è·å– Spring å®¹å™¨ï¼Œä¸åŒçš„æ˜¯ Spring å®¹å™¨åœ¨è°ƒç”¨ "),t("code",[e._v("setApplicationContext")]),e._v(" æ–¹æ³•æ—¶ä¼šæŠŠå®ƒè‡ªå·±ä½œä¸º "),t("code",[e._v("setApplicationContext")]),e._v(" çš„å‚æ•°ä¼ å…¥ï¼Œè€Œ Spring å®¹å™¨åœ¨è°ƒç”¨ "),t("code",[e._v("setBeanFactory")]),e._v(" å‰éœ€è¦ä½¿ç”¨è€…è‡ªå·±æŒ‡å®šï¼ˆæ³¨å…¥ï¼‰"),t("code",[e._v("setBeanFactory")]),e._v(" é‡Œçš„å‚æ•° "),t("code",[e._v("BeanFactory")])])])]),e._v(" "),t("li",[t("p",[e._v("å¦‚æœ Bean å®ç°äº† "),t("code",[e._v("BeanPostProcess")]),e._v(" æ¥å£ï¼ŒSpring å°†è°ƒç”¨ "),t("code",[e._v("postProcessBeforeInitialization")]),e._v(" æ–¹æ³•")]),e._v(" "),t("ul",[t("li",[e._v("ä½œç”¨æ˜¯åœ¨ Bean å®ä¾‹åˆ›å»ºæˆåŠŸåå¯¹å…¶è¿›è¡Œå¢å¼ºå¤„ç†ï¼Œå¦‚å¯¹ Bean è¿›è¡Œä¿®æ”¹ï¼Œå¢åŠ æŸä¸ªåŠŸèƒ½")])])]),e._v(" "),t("li",[t("p",[e._v("å¦‚æœ Bean å®ç°äº† "),t("code",[e._v("InitializingBean")]),e._v(" æ¥å£ï¼ŒSpring å°†è°ƒç”¨ "),t("code",[e._v("afterPropertiesSet")]),e._v(" æ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹ Bean ä½¿ç”¨ "),t("code",[e._v("init-method")]),e._v(" å£°æ˜åˆå§‹åŒ–çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ Bean çš„å…¨éƒ¨å±æ€§è®¾ç½®æˆåŠŸåæ‰§è¡Œçš„åˆå§‹åŒ–æ–¹æ³•ã€‚")])]),e._v(" "),t("li",[t("p",[e._v("å¦‚æœ Bean å®ç°äº† "),t("code",[e._v("BeanPostProcess")]),e._v(" æ¥å£ï¼ŒSpring å°†è°ƒç”¨ "),t("code",[e._v("postProcessAfterInitialization")]),e._v(" æ–¹æ³•")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("postProcessBeforeInitialization")]),e._v(" æ˜¯åœ¨ Bean åˆå§‹åŒ–å‰æ‰§è¡Œçš„ï¼Œè€Œ "),t("code",[e._v("postProcessAfterInitialization")]),e._v(" æ˜¯åœ¨ Bean åˆå§‹åŒ–åæ‰§è¡Œçš„")])])]),e._v(" "),t("li",[t("p",[e._v("ç»è¿‡ä»¥ä¸Šçš„å·¥ä½œåï¼ŒBean å°†ä¸€ç›´é©»ç•™åœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ç»™åº”ç”¨ä½¿ç”¨ï¼Œç›´åˆ°åº”ç”¨ä¸Šä¸‹æ–‡è¢«é”€æ¯")])]),e._v(" "),t("li",[t("p",[e._v("å¦‚æœ Bean å®ç°äº† "),t("code",[e._v("DispostbleBean")]),e._v(" æ¥å£ï¼ŒSpring å°†è°ƒç”¨å®ƒçš„ "),t("code",[e._v("destory")]),e._v(" æ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹ Bean ä½¿ç”¨ "),t("code",[e._v("destory-method")]),e._v(" å±æ€§çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ Bean å®ä¾‹é”€æ¯å‰æ‰§è¡Œçš„æ–¹æ³•ã€‚")])])]),e._v(" "),t("h2",{attrs:{id:"spring-bean-æ³¨å†Œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-æ³¨å†Œ"}},[e._v("#")]),e._v(" Spring Bean æ³¨å†Œ")]),e._v(" "),t("p",[e._v("æ³¨å†Œ Spring Bean å®é™…ä¸Šæ˜¯å°† "),t("code",[e._v("BeanDefinition")]),e._v(" æ³¨å†Œåˆ° IoC å®¹å™¨ä¸­ã€‚")]),e._v(" "),t("h3",{attrs:{id:"xml-é…ç½®å…ƒä¿¡æ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xml-é…ç½®å…ƒä¿¡æ¯"}},[e._v("#")]),e._v(" XML é…ç½®å…ƒä¿¡æ¯")]),e._v(" "),t("p",[e._v("Spring çš„ä¼ ç»Ÿé…ç½®æ–¹å¼ã€‚åœ¨ "),t("code",[e._v("<bean>")]),e._v(" æ ‡ç­¾ä¸­é…ç½®å…ƒæ•°æ®å†…å®¹ã€‚")]),e._v(" "),t("p",[e._v("ç¼ºç‚¹æ˜¯å½“ JavaBean è¿‡å¤šæ—¶ï¼Œäº§ç”Ÿçš„é…ç½®æ–‡ä»¶è¶³ä»¥è®©ä½ çœ¼èŠ±ç¼­ä¹±ã€‚")]),e._v(" "),t("h3",{attrs:{id:"æ³¨è§£é…ç½®å…ƒä¿¡æ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨è§£é…ç½®å…ƒä¿¡æ¯"}},[e._v("#")]),e._v(" æ³¨è§£é…ç½®å…ƒä¿¡æ¯")]),e._v(" "),t("p",[e._v("ä½¿ç”¨ "),t("code",[e._v("@Bean")]),e._v("ã€"),t("code",[e._v("@Component")]),e._v("ã€"),t("code",[e._v("@Import")]),e._v(" æ³¨è§£æ³¨å†Œ Spring Beanã€‚")]),e._v(" "),t("h3",{attrs:{id:"java-api-é…ç½®å…ƒä¿¡æ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java-api-é…ç½®å…ƒä¿¡æ¯"}},[e._v("#")]),e._v(" Java API é…ç½®å…ƒä¿¡æ¯")]),e._v(" "),t("ul",[t("li",[e._v("å‘½åæ–¹å¼ï¼š"),t("code",[e._v("BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)")])]),e._v(" "),t("li",[e._v("éå‘½åæ–¹å¼ï¼š"),t("code",[e._v("BeanDefinitionReaderUtils#registerWithGeneratedName(AbstractBeanDefinition,BeanDefinitionRegistry)")])]),e._v(" "),t("li",[e._v("é…ç½®ç±»æ–¹å¼ï¼š"),t("code",[e._v("AnnotatedBeanDefinitionReader#register(Class...)")])])]),e._v(" "),t("blockquote",[t("p",[e._v("ğŸ’» Spring Bean æ³¨å†Œç¤ºä¾‹æºç ï¼š"),t("a",{attrs:{href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanRegistryTests.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("BeanRegistryTests"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"spring-bean-å®ä¾‹åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-å®ä¾‹åŒ–"}},[e._v("#")]),e._v(" Spring Bean å®ä¾‹åŒ–")]),e._v(" "),t("p",[e._v("Spring Bean å®ä¾‹åŒ–æ–¹å¼ï¼š")]),e._v(" "),t("ul",[t("li",[e._v("å¸¸è§„æ–¹å¼\n"),t("ul",[t("li",[e._v("é€šè¿‡æ„é€ å™¨ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰")]),e._v(" "),t("li",[e._v("é€šè¿‡é™æ€æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰")]),e._v(" "),t("li",[e._v("é€šè¿‡ Bean å·¥å‚æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰")]),e._v(" "),t("li",[e._v("é€šè¿‡ "),t("code",[e._v("FactoryBean")]),e._v("ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰")])])]),e._v(" "),t("li",[e._v("ç‰¹æ®Šæ–¹å¼\n"),t("ul",[t("li",[e._v("é€šè¿‡ "),t("code",[e._v("ServiceLoaderFactoryBean")]),e._v("ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java API ï¼‰")]),e._v(" "),t("li",[e._v("é€šè¿‡ "),t("code",[e._v("AutowireCapableBeanFactory#createBean(java.lang.Class, int, boolean)")])]),e._v(" "),t("li",[e._v("é€šè¿‡ "),t("code",[e._v("BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)")])])])])]),e._v(" "),t("blockquote",[t("p",[e._v("ğŸ’» Spring Bean å®ä¾‹åŒ–ç¤ºä¾‹æºç ï¼š"),t("a",{attrs:{href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanInstantiationTests.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("BeanInstantiationTests"),t("OutboundLink")],1),e._v("ã€"),t("a",{attrs:{href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanInstantiationSpecialTests.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("BeanInstantiationSpecialTests"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"spring-bean-åˆå§‹åŒ–å’Œé”€æ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-åˆå§‹åŒ–å’Œé”€æ¯"}},[e._v("#")]),e._v(" Spring Bean åˆå§‹åŒ–å’Œé”€æ¯")]),e._v(" "),t("p",[e._v("Spring Bean åˆå§‹åŒ–å’Œé”€æ¯çš„æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("ä½¿ç”¨ "),t("code",[e._v("@PostConstruct")]),e._v(" å’Œ "),t("code",[e._v("@PreDestroy")]),e._v(" æ³¨è§£åˆ†åˆ«æŒ‡å®šç›¸åº”çš„åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ã€‚")])]),e._v(" "),t("li",[t("p",[e._v("å®ç° "),t("code",[e._v("InitializingBean")]),e._v(" æ¥å£çš„ "),t("code",[e._v("afterPropertiesSet()")]),e._v(" æ–¹æ³•æ¥ç¼–å†™åˆå§‹åŒ–æ–¹æ³•ï¼›å®ç° "),t("code",[e._v("DisposableBean")]),e._v(" æ¥å£çš„ "),t("code",[e._v("destroy()")]),e._v(" æ–¹æ³•æ¥ç¼–å†™é”€æ¯æ–¹æ³•ã€‚")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("InitializingBean")]),e._v(" æ¥å£åŒ…å«ä¸€ä¸ª "),t("code",[e._v("afterPropertiesSet")]),e._v(" æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™åˆå§‹åŒ–é€»è¾‘ã€‚")]),e._v(" "),t("li",[t("code",[e._v("DisposableBean")]),e._v("æ¥å£åŒ…å«ä¸€ä¸ª "),t("code",[e._v("destory")]),e._v(" æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™é”€æ¯é€»è¾‘ã€‚")])])]),e._v(" "),t("li",[t("p",[e._v("è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•")]),e._v(" "),t("ul",[t("li",[e._v("XML é…ç½®ï¼š"),t("code",[e._v('<bean init-method="init" destroy="destroy" ... />')])]),e._v(" "),t("li",[e._v("Java æ³¨è§£ï¼š"),t("code",[e._v('@Bean(initMethod = "init", destroyMethod = "destroy")')])]),e._v(" "),t("li",[e._v("Java APIï¼š"),t("code",[e._v("AbstractBeanDefinition#setInitMethodName(String)")]),e._v(" å’Œ "),t("code",[e._v("AbstractBeanDefinition#setDestroyMethodName(String)")]),e._v(" åˆ†åˆ«å®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•")])])])]),e._v(" "),t("p",[e._v("æ³¨æ„ï¼šå¦‚æœåŒæ—¶å­˜åœ¨ï¼Œæ‰§è¡Œé¡ºåºä¼šæŒ‰ç…§åºåˆ—æ‰§è¡Œã€‚")]),e._v(" "),t("p",[e._v("Bean çš„å»¶è¿Ÿåˆå§‹åŒ–")]),e._v(" "),t("ul",[t("li",[e._v("xml æ–¹å¼ï¼š"),t("code",[e._v('<bean lazy-init="true" ... />')])]),e._v(" "),t("li",[e._v("æ³¨è§£æ–¹å¼ï¼š"),t("code",[e._v("@Lazy")])])]),e._v(" "),t("p",[e._v("Spring æä¾›äº†ä¸€ä¸ª "),t("code",[e._v("BeanPostProcessor")]),e._v(" æ¥å£ï¼Œæä¾›äº†ä¸¤ä¸ªæ–¹æ³• "),t("code",[e._v("postProcessBeforeInitialization")]),e._v(" å’Œ "),t("code",[e._v("postProcessAfterInitialization")]),e._v("ã€‚å…¶ä¸­"),t("code",[e._v("postProcessBeforeInitialization")]),e._v(" åœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨ä¹‹å‰æ‰§è¡Œï¼Œ"),t("code",[e._v("postProcessAfterInitialization")]),e._v(" åœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨ä¹‹åæ‰§è¡Œã€‚å®ƒä»¬éƒ½åŒ…å«ä¸¤ä¸ªå…¥å‚ï¼š")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("bean")]),e._v("ï¼šå½“å‰ç»„ä»¶å¯¹è±¡ï¼›")]),e._v(" "),t("li",[t("code",[e._v("beanName")]),e._v("ï¼šå½“å‰ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„åç§°ã€‚")])]),e._v(" "),t("blockquote",[t("p",[e._v("ğŸ’» Spring Bean åˆå§‹åŒ–å’Œé”€æ¯ç¤ºä¾‹æºç ï¼š"),t("a",{attrs:{href:"https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanInitDestroyTests.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("BeanInitDestroyTests"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"spring-bean-åƒåœ¾å›æ”¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-åƒåœ¾å›æ”¶"}},[e._v("#")]),e._v(" Spring Bean åƒåœ¾å›æ”¶")]),e._v(" "),t("p",[e._v("Spring Bean åƒåœ¾å›æ”¶æ­¥éª¤ï¼š")]),e._v(" "),t("ol",[t("li",[e._v("å…³é—­ Spring å®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡ï¼‰")]),e._v(" "),t("li",[e._v("æ‰§è¡Œ GC")]),e._v(" "),t("li",[e._v("Spring Bean è¦†ç›–çš„ "),t("code",[e._v("finalize()")]),e._v(" æ–¹æ³•è¢«å›è°ƒ")])]),e._v(" "),t("h2",{attrs:{id:"spring-bean-ä½œç”¨èŒƒå›´"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-ä½œç”¨èŒƒå›´"}},[e._v("#")]),e._v(" Spring Bean ä½œç”¨èŒƒå›´")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Scope")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-singleton",target:"_blank",rel:"noopener noreferrer"}},[e._v("singleton"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("(Default) Scopes a single bean definition to a single object instance for each Spring IoC container.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-prototype",target:"_blank",rel:"noopener noreferrer"}},[e._v("prototype"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Scopes a single bean definition to any number of object instances.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request",target:"_blank",rel:"noopener noreferrer"}},[e._v("request"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Scopes a single bean definition to the lifecycle of a single HTTP request. That is, each HTTP request has its own instance of a bean created off the back of a single bean definition. Only valid in the context of a web-aware Spring "),t("code",[e._v("ApplicationContext")]),e._v(".")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-session",target:"_blank",rel:"noopener noreferrer"}},[e._v("session"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Scopes a single bean definition to the lifecycle of an HTTP "),t("code",[e._v("Session")]),e._v(". Only valid in the context of a web-aware Spring "),t("code",[e._v("ApplicationContext")]),e._v(".")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-application",target:"_blank",rel:"noopener noreferrer"}},[e._v("application"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Scopes a single bean definition to the lifecycle of a "),t("code",[e._v("ServletContext")]),e._v(". Only valid in the context of a web-aware Spring "),t("code",[e._v("ApplicationContext")]),e._v(".")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket-stomp-websocket-scope",target:"_blank",rel:"noopener noreferrer"}},[e._v("websocket"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Scopes a single bean definition to the lifecycle of a "),t("code",[e._v("WebSocket")]),e._v(". Only valid in the context of a web-aware Spring "),t("code",[e._v("ApplicationContext")]),e._v(".")])])])]),e._v(" "),t("h2",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[e._v("#")]),e._v(" å‚è€ƒèµ„æ–™")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#beans",target:"_blank",rel:"noopener noreferrer"}},[e._v("Spring å®˜æ–¹æ–‡æ¡£ä¹‹ Core Technologies"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://time.geekbang.org/course/intro/265",target:"_blank",rel:"noopener noreferrer"}},[e._v("ã€Šå°é©¬å“¥è®² Spring æ ¸å¿ƒç¼–ç¨‹æ€æƒ³ã€‹"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);